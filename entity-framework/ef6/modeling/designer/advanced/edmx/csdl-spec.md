---
title: Спецификация языка CSDL - EF6
author: divega
ms.date: 10/23/2016
ms.assetid: c54255f4-253f-49eb-bec8-ad7927ac2fa3
ms.openlocfilehash: f5bf0dc75a8195e9af979c9e044f36171f46c9b7
ms.sourcegitcommit: 2b787009fd5be5627f1189ee396e708cd130e07b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2018
ms.locfileid: "45490523"
---
# <a name="csdl-specification"></a>Спецификация CSDL
Язык CSDL — это язык на основе XML, описывающий сущности, связи и функции, составляющие концептуальную модель управляемого данными приложения. Эту концептуальную модель можно использовать с Entity Framework или службы WCF Data Services. Метаданные, описываемые на языке CSDL используется платформой Entity Framework для сопоставления сущностей и связей, которые определены в концептуальной модели к источнику данных. Дополнительные сведения см. в разделе [спецификация SSDL](~/ef6/modeling/designer/advanced/edmx/ssdl-spec.md) и [спецификация MSL](~/ef6/modeling/designer/advanced/edmx/msl-spec.md).

CSDL — это реализация модели EDM Entity Framework.

В приложении Entity Framework метаданные концептуальной модели, загружается из CSDL-файл (написанный на языке CSDL) в экземпляр System.Data.Metadata.Edm.EdmItemCollection и доступен с помощью методов в Класс System.Data.Metadata.Edm.MetadataWorkspace. Метаданные концептуальной модели Entity Framework используются для преобразования запросов к концептуальной модели в команды, зависящие от источника данных.

Конструктор EF хранит сведения о концептуальной модели в EDMX-файла во время разработки. Во время сборки, EF конструктор на основе сведений в EDMX-файла, создаваемого CSDL-файл, необходимый Entity Framework во время выполнения.

Версии языка CSDL различаются по пространствам имен XML.

| Версия языка CSDL | Пространство имен XML                                |
|:-------------|:---------------------------------------------|
| CSDL версии 1      | http://schemas.microsoft.com/ado/2006/04/edm |
| CSDL версии 2      | http://schemas.microsoft.com/ado/2008/09/edm |
| CSDL версии 3      | http://schemas.microsoft.com/ado/2009/11/edm |

 
## <a name="association-element-csdl"></a>Элемент Association (CSDL)

**Ассоциации** элемент определяет связь между двумя типами сущностей. Ассоциация должна указывать типы сущностей, которые участвуют в связи, и возможное количество типов сущностей на каждом конце связи, которое называется кратностью. Кратность элемента ассоциации может иметь значение (1), ноль или один (0.. 1) или многие (\*). Эта информация указывается в два дочерних элемента.

К экземплярам типов сущностей в одном элементе ассоциации можно обращаться посредством свойств навигации или внешних ключей, если они предоставлены в типе сущности.

В приложении экземпляр ассоциации представляет конкретную ассоциацию между экземплярами типов сущностей. Экземпляры ассоциации логически сгруппированы в набор ассоциаций.

**Ассоциации** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   End (ровно 2 элемента)
-   ReferentialConstraint (ноль или один элемент)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **ассоциации** элемент.

| Имя атрибута | Необходимо | Значение                        |
|:---------------|:------------|:-----------------------------|
| **Name**       | Да         | Имя ассоциации. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **ассоциации** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **ассоциации** элемент, определяющий **CustomerOrders** ассоциации, если внешние ключи не представлены в **клиента** и  **Порядок** типов сущностей. **Кратность** значения для каждого **конечных** ассоциации указывают что многие **заказы** может быть связано с **клиента**, но только один **клиента** может быть связано с **порядок**. Кроме того **OnDelete** элемент указывает, что все **заказы** , относящихся к конкретному **клиента** и были загружены в контекст ObjectContext будут удалены Если **клиента** удаляется.

``` xml
 <Association Name="CustomerOrders">
   <End Type="ExampleModel.Customer" Role="Customer" Multiplicity="1" >
         <OnDelete Action="Cascade" />
   </End>
   <End Type="ExampleModel.Order" Role="Order" Multiplicity="*" />
 </Association>
```
 

В следующем примере показан **ассоциации** элемент, определяющий **CustomerOrders** ассоциации, если внешние ключи представлены в **клиента** и  **Порядок** типов сущностей. Внешние ключи представлены, связи между сущностями, управляются с помощью **ReferentialConstraint** элемент. Соответствующий элемент AssociationSetMapping необязателен для сопоставления этой ассоциации с источником данных.

``` xml
 <Association Name="CustomerOrders">
   <End Type="ExampleModel.Customer" Role="Customer" Multiplicity="1" >
         <OnDelete Action="Cascade" />
   </End>
   <End Type="ExampleModel.Order" Role="Order" Multiplicity="*" />
   <ReferentialConstraint>
        <Principal Role="Customer">
            <PropertyRef Name="Id" />
        </Principal>
        <Dependent Role="Order">
             <PropertyRef Name="CustomerId" />
         </Dependent>
   </ReferentialConstraint>
 </Association>
```
 

 

## <a name="associationset-element-csdl"></a>Элемент AssociationSet (CSDL)

**AssociationSet** элемента на языке определения концептуальной схемы (CSDL) — это логический контейнер для экземпляров ассоциаций одного типа. Набор ассоциаций предоставляет определение группы экземпляров ассоциаций, чтобы их можно было сопоставить с источником данных.  

**AssociationSet** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один допустимое количество элементов)
-   End (требуется ровно 2 элемента)
-   Элементы annotation (ноль или более допустимое количество элементов)

**Ассоциации** атрибут задает тип ассоциации, содержащейся в наборе ассоциаций. Наборы сущностей, которые представляют конечные набора ассоциаций, указываются ровно двумя дочерними **окончания** элементов.

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **AssociationSet** элемент.

| Имя атрибута  | Необходимо | Значение                                                                                                                                                             |
|:----------------|:------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name**        | Да         | Имя набора сущностей. Значение **имя** атрибут не может быть таким же, как значение **ассоциации** атрибута.                                 |
| **Ассоциации** | Да         | Полное имя ассоциации, экземпляры которой содержатся в наборе ассоциаций. Ассоциация должна находиться в том же пространстве имен, что и набор ассоциаций. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **AssociationSet** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **EntityContainer** элемент с двумя **AssociationSet** элементов:

``` xml
 <EntityContainer Name="BooksContainer" >
   <EntitySet Name="Books" EntityType="BooksModel.Book" />
   <EntitySet Name="Publishers" EntityType="BooksModel.Publisher" />
   <EntitySet Name="Authors" EntityType="BooksModel.Author" />
   <AssociationSet Name="PublishedBy" Association="BooksModel.PublishedBy">
     <End Role="Book" EntitySet="Books" />
     <End Role="Publisher" EntitySet="Publishers" />
   </AssociationSet>
   <AssociationSet Name="WrittenBy" Association="BooksModel.WrittenBy">
     <End Role="Book" EntitySet="Books" />
     <End Role="Author" EntitySet="Authors" />
   </AssociationSet>
 </EntityContainer>
```
 

 

## <a name="collectiontype-element-csdl"></a>Элемент CollectionType (язык CSDL)

**CollectionType** элемента на языке определения концептуальной схемы (CSDL) указывает, что параметр функции или функции возвращает тип является коллекцией. **CollectionType** элемент может быть дочерним элемент параметра или элемент ReturnType (функция). Тип коллекции можно указать с помощью **тип** атрибут или одно из следующих дочерних элементов:

-   **CollectionType**
-   ReferenceType
-   RowType
-   TypeRef

> [!NOTE]
> Модель не пройдет проверку, если тип коллекции будет указан и с **тип** атрибут и дочерний элемент.

 

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **CollectionType** элемент. Обратите внимание, что **DefaultValue**, **MaxLength**, **FixedLength**, **точности**, **масштабирования**,  **Юникод**, и **параметры сортировки** атрибуты применимы только к коллекциям **EDMSimpleTypes**.

| Имя атрибута                                                          | Необходимо | Значение                                                                                                                                                                                                                            |
|:------------------------------------------------------------------------|:------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Type**                                                                | Нет          | Тип коллекции.                                                                                                                                                                                                      |
| **Допускающий значение NULL**                                                            | Нет          | **Значение true,** (значение по умолчанию) или **False** в зависимости от того, может ли свойство иметь значение null. <br/> [!NOTE]                                                                                                                 |
| > В языке CSDL v1, должен иметь свойство сложного типа `Nullable="False"`. |             |                                                                                                                                                                                                                                  |
| **DefaultValue**                                                        | Нет          | Значение свойства по умолчанию.                                                                                                                                                                                               |
| **MaxLength**                                                           | Нет          | Максимальная длина значения свойства.                                                                                                                                                                                        |
| **FixedLength**                                                         | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка фиксированной длины.                                                                                                                           |
| **Точность**                                                           | Нет          | Точность значения свойства.                                                                                                                                                                                             |
| **Масштаб**                                                               | Нет          | Масштаб значения свойства.                                                                                                                                                                                                 |
| **SRID**                                                                | Нет          | Идентификатор ссылки Пространственные системы. Допустимо только для свойства пространственных типов.   Дополнительные сведения см. в разделе [SRID](http://en.wikipedia.org/wiki/SRID) и [SRID (SQL Server)](https://msdn.microsoft.com/library/bb964707.aspx) |
| **Юникод**                                                             | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка Юникода.                                                                                                                                |
| **Параметры сортировки**                                                           | Нет          | Строка, указывающая последовательность сортировки, которая должна использоваться в источнике данных.                                                                                                                                                    |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **CollectionType** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показано определяемой моделью функции, в которой используется **CollectionType** элемента, чтобы указать, что функция возвращает коллекцию **Person** типы сущностей (как указано с **ElementType** атрибут).

``` xml
 <Function Name="LastNamesAfter">
        <Parameter Name="someString" Type="Edm.String"/>
        <ReturnType>
             <CollectionType  ElementType="SchoolModel.Person"/>
        </ReturnType>
        <DefiningExpression>
             SELECT VALUE p
             FROM SchoolEntities.People AS p
             WHERE p.LastName >= someString
        </DefiningExpression>
 </Function>
```
 

В следующем примере показано определяемой моделью функции, который использует **CollectionType** элемента, чтобы указать, что функция возвращает коллекцию строк (как указано в **RowType** элемент).

``` xml
 <Function Name="LastNamesAfter">
   <Parameter Name="someString" Type="Edm.String" />
   <ReturnType>
    <CollectionType>
      <RowType>
        <Property Name="FirstName" Type="Edm.String" Nullable="false" />
        <Property Name="LastName" Type="Edm.String" Nullable="false" />
      </RowType>
    </CollectionType>
   </ReturnType>
   <DefiningExpression>
             SELECT VALUE ROW(p.FirstName, p.LastName)
             FROM SchoolEntities.People AS p
             WHERE p.LastName &gt;= somestring
   </DefiningExpression>
 </Function>
```
 

В следующем примере показано определяемой моделью функции, который использует **CollectionType** элемента, чтобы указать, что функция принимает в качестве параметра коллекцию **отдел** типов сущностей.

``` xml
 <Function Name="GetAvgBudget">
      <Parameter Name="Departments">
          <CollectionType>
             <TypeRef Type="SchoolModel.Department"/>
          </CollectionType>
           </Parameter>
       <ReturnType Type="Collection(Edm.Decimal)"/>
       <DefiningExpression>
             SELECT VALUE AVG(d.Budget) FROM Departments AS d
       </DefiningExpression>
 </Function>
```
 

 

## <a name="complextype-element-csdl"></a>Элемент ComplexType (CSDL)

Объект **ComplexType** элемент определяет структуру данных, состоящих из **EdmSimpleType** свойств или других сложных типов.  Сложный тип может быть свойством типа сущности или другого сложного типа. Сложный тип аналогичен типу сущности, поскольку также определяет данные. Однако между сложными типами и типами сущности существуют некоторые ключевые различия.

-   Сложные типы не имеют идентификаторов (или ключей) и поэтому не могут существовать независимо. Сложные типы могут существовать только как свойства типов сущностей или других сложных типов.
-   Сложные типы не могут участвовать в связях. Ни конечной точки ассоциации может быть сложным типом, и поэтому свойства навигации нельзя определить для сложных типов.
-   Свойство сложного типа не может иметь значение null, хотя каждое скалярное свойство сложного типа может быть установлено в это значение.

Объект **ComplexType** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Свойство (ноль или более элементов)
-   Элементы annotation (ноль или более элементов)

В следующей таблице описаны атрибуты, которые могут применяться к **ComplexType** элемент.

| Имя атрибута                                                                                                 | Необходимо | Значение                                                                                                                                                                               |
|:---------------------------------------------------------------------------------------------------------------|:------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| name                                                                                                           | Да         | Имя сложного типа. Имя сложного типа не может совпадать с именем другого сложного типа, типа сущности или сопоставления, которые находятся в области модели. |
| BaseType                                                                                                       | Нет          | Имя другого сложного типа, который является базовым типом определяемого сложного типа. <br/> [!NOTE]                                                                     |
| > Этот атрибут неприменим в версии 1 для языка CSDL. В этой версии не поддерживается наследование для сложных типов. |             |                                                                                                                                                                                     |
| Абстрактный                                                                                                       | Нет          | **Значение true,** или **False** (значение по умолчанию) в зависимости от того, является ли сложный тип абстрактным типом. <br/> [!NOTE]                                                                  |
| > Этот атрибут неприменим в версии 1 для языка CSDL. Сложные типы в этой версии не могут быть абстрактными типами.         |             |                                                                                                                                                                                     |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **ComplexType** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показано сложный тип, **адрес**, с помощью **EdmSimpleType** свойства **StreetAddress**, **Город**,  **StateOrProvince**, **страны**, и **PostalCode**.

``` xml
 <ComplexType Name="Address" >
   <Property Type="String" Name="StreetAddress" Nullable="false" />
   <Property Type="String" Name="City" Nullable="false" />
   <Property Type="String" Name="StateOrProvince" Nullable="false" />
   <Property Type="String" Name="Country" Nullable="false" />
   <Property Type="String" Name="PostalCode" Nullable="false" />
 </ComplexType>
```
 

Чтобы определить сложный тип **адрес** (выше) как свойство типа сущности, необходимо объявить тип свойства в определении типа сущности. В следующем примере показан **адрес** свойство как сложный тип для типа сущности (**издателя**):

``` xml
 <EntityType Name="Publisher">
       <Key>
         <PropertyRef Name="Id" />
       </Key>
       <Property Type="Int32" Name="Id" Nullable="false" />
       <Property Type="String" Name="Name" Nullable="false" />
       <Property Type="BooksModel.Address" Name="Address" Nullable="false" />
       <NavigationProperty Name="Books" Relationship="BooksModel.PublishedBy"
                           FromRole="Publisher" ToRole="Book" />
     </EntityType>
```
 

 

## <a name="definingexpression-element-csdl"></a>Элемент DefiningExpression (CSDL)

**DefiningExpression** элемент на языке определения концептуальной схемы (CSDL) содержит выражение Entity SQL, которая определяет функцию в концептуальной модели.  

> [!NOTE]
> В целях проверки **DefiningExpression** элемент может содержать произвольное содержимое. Тем не менее, платформа Entity Framework приведет к возникновению исключения во время выполнения при **DefiningExpression** элемент не содержит допустимый язык Entity SQL.

 

### <a name="applicable-attributes"></a>Применимые атрибуты

Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **DefiningExpression** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере используется **DefiningExpression** для определения функции, которая возвращает количество лет с момента публикации книги. Содержание **DefiningExpression** элемент создается на языке Entity SQL.

``` xml
 <Function Name="GetYearsInPrint" ReturnType="Edm.Int32" >
       <Parameter Name="book" Type="BooksModel.Book" />
       <DefiningExpression>
         Year(CurrentDateTime()) - Year(cast(book.PublishedDate as DateTime))
       </DefiningExpression>
     </Function>
```
 

 

## <a name="dependent-element-csdl"></a>Элемент Dependent (CSDL)

**Зависимых** элемента на языке определения концептуальной схемы (CSDL) является дочерним элементом для элемента ReferentialConstraint и определяет зависимый конец справочного ограничения. Объект **ReferentialConstraint** элемент определяет функциональные возможности, схожие с возможностями ограничения ссылочной целостности в реляционной базе данных. Свойство (или свойства) типа сущности могут ссылаться на ключ сущности в другом типе сущности также, как столбец (или столбцы) в таблице базы данных могут ссылаться на первичный ключ другой таблицы. Тип сущности, на который приведена ссылка называется *основного конца* ограничения. Тип сущности, который ссылается на основном конечном элементе называется *зависимого конца* ограничения. **PropertyRef** элементы, используемые для указания, какие разделы ссылаются на основной элемент.

**Зависимых** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   PropertyRef (один или несколько элементов)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **зависимых** элемент.

| Имя атрибута | Необходимо | Значение                                                                |
|:---------------|:------------|:---------------------------------------------------------------------|
| **Роль**       | Да         | Имя типа сущности в зависимом элементе ассоциации. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **зависимых** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **ReferentialConstraint** элемента, используемого в качестве части определения **PublishedBy** ассоциации. **PublisherId** свойство **книги** делает тип сущности представляет зависимый элемент ссылочного ограничения.

``` xml
 <Association Name="PublishedBy">
   <End Type="BooksModel.Book" Role="Book" Multiplicity="*" >
   </End>
   <End Type="BooksModel.Publisher" Role="Publisher" Multiplicity="1" />
   <ReferentialConstraint>
     <Principal Role="Publisher">
       <PropertyRef Name="Id" />
     </Principal>
     <Dependent Role="Book">
       <PropertyRef Name="PublisherId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```
 

 

## <a name="documentation-element-csdl"></a>Элемент Documentation (CSDL)

**Документации** элемента на языке определения концептуальной схемы (CSDL) можно использовать для предоставления сведений об объекте, который определен в родительском элементе. В файле EDMX когда **документации** элемент является дочерним для элемента, который отображается в виде объекта в области конструктора в конструкторе EF (например, сущность, ассоциация или свойство), содержимое **документации**  элемент будет отображаться в Visual Studio **свойства** для объекта.

**Документации** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   **Сводка**: краткое описание родительского элемента. (ноль или один элемент)
-   **LongDescription**: подробное описание родительского элемента. (ноль или один элемент)
-   Элементы annotation. (ноль или больше элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **документации** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан **документации** элемент как дочерний элемент элемента EntityType. Если приведенный ниже фрагмент кода на языке CSDL содержимое EDMX, содержимое файла из **Сводка** и **LongDescription** появилось бы в Visual Studio **свойства** окно, при щелчке `Customer` типа сущности.

``` xml
 <EntityType Name="Customer">
    <Documentation>
      <Summary>Summary here.</Summary>
      <LongDescription>Long description here.</LongDescription>
    </Documentation>
    <Key>
      <PropertyRef Name="CustomerId" />
    </Key>
    <Property Type="Int32" Name="CustomerId" Nullable="false" />
    <Property Type="String" Name="Name" Nullable="false" />
 </EntityType>
```
 

 

## <a name="end-element-csdl"></a>Элемент End (CSDL)

**Окончания** элемент на языке определения концептуальной схемы (CSDL) может быть потомком элемента Association или элемент AssociationSet. В каждом случае роль **окончания** отличается элемент и применимые атрибуты отличаются.

### <a name="end-element-as-a-child-of-the-association-element"></a>Элемент End как дочерний по отношению к элементу Association

**Окончания** элемент (как дочерний **ассоциации** элемент) определяет тип сущности на одном конце ассоциации и число экземпляров типа сущности, которые могут существовать на одной конечной точке ассоциации. Элементы ассоциации определяются при определении ассоциации; ассоциация должна иметь два элемента. К экземплярам типов сущности на одном элементе ассоциации можно осуществлять доступ с помощью свойств навигации или внешних ключей при условии, что они были предоставлены в типах сущности.  

**Окончания** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   OnDelete (ноль или один элемент)
-   Элементы annotation (ноль или более элементов)

#### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **окончания** элементу, если он является дочерним элементом **ассоциации** элемент.

| Имя атрибута   | Необходимо | Значение                                                                                                                                                                                                                                                                                                                                                                                                              |
|:-----------------|:------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Type**         | Да         | Имя типа сущности на одном элементе ассоциации.                                                                                                                                                                                                                                                                                                                                                         |
| **Роль**         | Нет          | Имя для элемента ассоциации. Если имя не было предоставлено, будет использовано имя типа сущности на элементе ассоциации.                                                                                                                                                                                                                                                                                           |
| **Кратность** | Да         | **1**, **от 0 до 1**, или **\*** в зависимости от количества экземпляров типа сущности, которые могут быть в конце ассоциации. <br/> **1** означает, что только один экземпляр типа сущности существует на элементе ассоциации. <br/> **от 0 до 1** указывает, что на конечной точке ассоциации существует ноль или один экземпляров типа сущности. <br/> **\*** Указывает, что на конечной точке ассоциации существует ноль, один или несколько экземпляров типа сущности. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **окончания** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

#### <a name="example"></a>Пример

В следующем примере показан **ассоциации** элемент, определяющий **CustomerOrders** ассоциации. **Кратность** значения для каждого **конечных** ассоциации указывают что многие **заказы** может быть связано с **клиента**, но только один **клиента** может быть связано с **порядок**. Кроме того **OnDelete** элемент указывает, что все **заказы** , относящихся к конкретному **клиента** и которые были загружены в контекст ObjectContext будет Если удаленные **клиента** удаляется.

``` xml
 <Association Name="CustomerOrders">
   <End Type="ExampleModel.Customer" Role="Customer" Multiplicity="1" />
   <End Type="ExampleModel.Order" Role="Order" Multiplicity="*">
         <OnDelete Action="Cascade" />
   </End>
 </Association>
```
 

### <a name="end-element-as-a-child-of-the-associationset-element"></a>Элемент End как дочерний по отношению к элементу AssociationSet

**Окончания** элемент указывает один конец набора ассоциаций. **AssociationSet** элемент должен содержать два **окончания** элементов. Сведения, содержащиеся в **окончания** элемент используется в сопоставлении с источником данных набора ассоциаций.

**Окончания** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Элементы annotation (ноль или более элементов)

> [!NOTE]
> Элементы Annotation должны следовать после всех остальных дочерних элементов. Элементы annotation допускаются только в том случае, в языке CSDL версии 2 и более поздних версий.

 

#### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **окончания** элементу, если он является дочерним элементом **AssociationSet** элемент.

| Имя атрибута | Необходимо | Значение                                                                                                                                                                                                                 |
|:---------------|:------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Набор EntitySet**  | Да         | Имя **EntitySet** , определяющего один элемент родительского элемента **AssociationSet** элемент. **EntitySet** должен быть определен в том же контейнере сущностей, что и родительский элемент **AssociationSet** элемент. |
| **Роль**       | Нет          | Имя элемента набора ассоциаций. Если **роли** атрибут не используется, имя набора ассоциаций будет использоваться имя набора сущностей.                                                                   |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **окончания** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

#### <a name="example"></a>Пример

В следующем примере показан **EntityContainer** элемент с двумя **AssociationSet** элементов, каждый с двумя **окончания** элементов:

``` xml
 <EntityContainer Name="BooksContainer" >
   <EntitySet Name="Books" EntityType="BooksModel.Book" />
   <EntitySet Name="Publishers" EntityType="BooksModel.Publisher" />
   <EntitySet Name="Authors" EntityType="BooksModel.Author" />
   <AssociationSet Name="PublishedBy" Association="BooksModel.PublishedBy">
     <End Role="Book" EntitySet="Books" />
     <End Role="Publisher" EntitySet="Publishers" />
   </AssociationSet>
   <AssociationSet Name="WrittenBy" Association="BooksModel.WrittenBy">
     <End Role="Book" EntitySet="Books" />
     <End Role="Author" EntitySet="Authors" />
   </AssociationSet>
 </EntityContainer>
```
 

 

## <a name="entitycontainer-element-csdl"></a>Элемент EntityContainer (CSDL)

**EntityContainer** элемента на языке определения концептуальной схемы (CSDL) — это логический контейнер для наборов сущностей, наборов ассоциаций и функций импорта. Контейнер сущностей модели хранения посредством элемента EntityContainerMapping сопоставляет контейнер сущностей концептуальной модели. Контейнер сущностей режима хранения описывает структуру базы данных: наборы сущностей описывают таблицы, наборы ассоциаций описывают ограничения внешних ключей, функции импорта описывают хранимые процедуры в базе данных.

**EntityContainer** элемент может иметь ноль или один элемент документации. Если **документации** элемент присутствует, он должен предшествовать **EntitySet**, **AssociationSet**, и **FunctionImport** элементов.

**EntityContainer** элемент может иметь ноль или более следующих дочерних элементов (в указанном порядке):

-   EntitySet
-   AssociationSet
-   FunctionImport
-   Элементы Annotation

Вы можете расширить **EntityContainer** элемент для включения содержимого другого **EntityContainer** , находящегося в одном пространстве имен. Чтобы включить содержимое другого **EntityContainer**, в ссылающейся **EntityContainer** элемент, установите для параметра **расширения** атрибут имени  **EntityContainer** элемент, который требуется включить. Все дочерние элементы включенного **EntityContainer** элемент будет рассматриваться как дочерние элементы ссылающегося **EntityContainer** элемент.

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **Using** элемент.

| Имя атрибута | Необходимо | Значение                                                           |
|:---------------|:------------|:----------------------------------------------------------------|
| **Name**       | Да         | Имя контейнера сущностей.                               |
| **Расширяет**    | Нет          | Имя другого контейнера сущностей в том же пространстве имен. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **EntityContainer** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **EntityContainer** элемент, определяющий три набора сущностей и два набора ассоциаций.

``` xml
 <EntityContainer Name="BooksContainer" >
   <EntitySet Name="Books" EntityType="BooksModel.Book" />
   <EntitySet Name="Publishers" EntityType="BooksModel.Publisher" />
   <EntitySet Name="Authors" EntityType="BooksModel.Author" />
   <AssociationSet Name="PublishedBy" Association="BooksModel.PublishedBy">
     <End Role="Book" EntitySet="Books" />
     <End Role="Publisher" EntitySet="Publishers" />
   </AssociationSet>
   <AssociationSet Name="WrittenBy" Association="BooksModel.WrittenBy">
     <End Role="Book" EntitySet="Books" />
     <End Role="Author" EntitySet="Authors" />
   </AssociationSet>
 </EntityContainer>
```
 

 

## <a name="entityset-element-csdl"></a>Элемент EntitySet (CSDL)

**EntitySet** элемент в язык определения концептуальной схемы — это логический контейнер для экземпляров типа сущности и экземпляров любого типа, который является производным от этого типа сущности. Связь между типом сущности и набором сущностей аналогична связи между строкой и таблицей в реляционной базе данных. Тип сущности, как и строка, определяет ряд взаимосвязанных данных, а набор сущностей, как и таблица, содержит экземпляры этого определения. Набор сущностей предоставляет конструкцию для группирования экземпляров типа сущности, чтобы их можно было сопоставлять со связанными структурами данных в источнике данных.  

Можно определить больше одного набора сущностей для конкретного типа сущности.

> [!NOTE]
> Конструктор EF не поддерживает концептуальные модели, которые содержат несколько наборов сущностей на тип.

 

**EntitySet** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Элемент Documentation (ноль или один допустимое количество элементов)
-   Элементы annotation (ноль или более допустимое количество элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **EntitySet** элемент.

| Имя атрибута | Необходимо | Значение                                                                                    |
|:---------------|:------------|:-----------------------------------------------------------------------------------------|
| **Name**       | Да         | Имя набора сущностей.                                                              |
| **EntityType** | Да         | Полное имя типа сущности, для которого набор сущностей содержит экземпляры. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **EntitySet** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **EntityContainer** элемент с тремя **EntitySet** элементов:

``` xml
 <EntityContainer Name="BooksContainer" >
   <EntitySet Name="Books" EntityType="BooksModel.Book" />
   <EntitySet Name="Publishers" EntityType="BooksModel.Publisher" />
   <EntitySet Name="Authors" EntityType="BooksModel.Author" />
   <AssociationSet Name="PublishedBy" Association="BooksModel.PublishedBy">
     <End Role="Book" EntitySet="Books" />
     <End Role="Publisher" EntitySet="Publishers" />
   </AssociationSet>
   <AssociationSet Name="WrittenBy" Association="BooksModel.WrittenBy">
     <End Role="Book" EntitySet="Books" />
     <End Role="Author" EntitySet="Authors" />
   </AssociationSet>
 </EntityContainer>
```
 

Предусмотрена возможность определять несколько наборов сущностей на тип (модель MEST). В следующем примере определяется контейнер сущностей с двумя наборами сущностей для **книги** типа сущности:

``` xml
 <EntityContainer Name="BooksContainer" >
   <EntitySet Name="Books" EntityType="BooksModel.Book" />
   <EntitySet Name="FictionBooks" EntityType="BooksModel.Book" />
   <EntitySet Name="Publishers" EntityType="BooksModel.Publisher" />
   <EntitySet Name="Authors" EntityType="BooksModel.Author" />
   <AssociationSet Name="PublishedBy" Association="BooksModel.PublishedBy">
     <End Role="Book" EntitySet="Books" />
     <End Role="Publisher" EntitySet="Publishers" />
   </AssociationSet>
   <AssociationSet Name="BookAuthor" Association="BooksModel.BookAuthor">
     <End Role="Book" EntitySet="Books" />
     <End Role="Author" EntitySet="Authors" />
   </AssociationSet>
 </EntityContainer>
```
 

 

## <a name="entitytype-element-csdl"></a>Элемент EntityType (CSDL)

**EntityType** элемент представляет структуру концепции верхнего уровня, например, клиента или заказа, в концептуальной модели. Тип сущности — это шаблон для экземпляров типов сущностей в приложении. Каждый шаблон содержит следующие сведения.

-   Уникальное имя. (Обязательно).
-   Ключ сущности, определяемый одним или несколькими свойствами. (Обязательно).
-   Свойства содержащихся данных. (Необязательно.)
-   Свойства навигации, позволяющие осуществлять переход от одного элемента ассоциации к другому. (Необязательно.)

В приложении экземпляр типа сущности представляет определенный объект (например, определенного клиента или заказ). Каждый экземпляр типа сущности в наборе сущностей должен иметь уникальный ключ сущности.

Два экземпляра типа сущности считаются равными, только если они являются экземплярами одного типа и значения их ключей сущности равны.

**EntityType** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Ключ (ноль или один элемент)
-   Свойство (ноль или более элементов)
-   NavigationProperty (ноль или более элементов)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **EntityType** элемент.

| Имя атрибута                                                                                                                                  | Необходимо | Значение                                                                                            |
|:------------------------------------------------------------------------------------------------------------------------------------------------|:------------|:-------------------------------------------------------------------------------------------------|
| **Name**                                                                                                                                        | Да         | Имя типа сущности.                                                                     |
| **BaseType**                                                                                                                                    | Нет          | Имя другого типа сущности, являющегося базовым типом для определяемого типа сущности.  |
| **Абстрактный**                                                                                                                                    | Нет          | **Значение true,** или **False**в зависимости от того, является ли тип сущности абстрактным типом.                 |
| **OpenType**                                                                                                                                    | Нет          | **Значение true,** или **False** в зависимости от того, является ли тип сущности является тип сущности открытым. <br/> [!NOTE] |
| > **OpenType** атрибут применяется только к типам сущностей, которые определены в концептуальной модели, которые используются со службами данных ADO.NET. |             |                                                                                                  |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **EntityType** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **EntityType** элемент с тремя **свойство** элементов и два **NavigationProperty** элементов:

``` xml
 <EntityType Name="Book">
   <Key>
     <PropertyRef Name="ISBN" />
   </Key>
   <Property Type="String" Name="ISBN" Nullable="false" />
   <Property Type="String" Name="Title" Nullable="false" />
   <Property Type="Decimal" Name="Revision" Nullable="false" Precision="29" Scale="29" />
   <NavigationProperty Name="Publisher" Relationship="BooksModel.PublishedBy"
                       FromRole="Book" ToRole="Publisher" />
   <NavigationProperty Name="Authors" Relationship="BooksModel.WrittenBy"
                       FromRole="Book" ToRole="Author" />
 </EntityType>
```
 

 

## <a name="enumtype-element-csdl"></a>Элемент EnumType (CSDL)

**EnumType** элемент представляет собой перечислимый тип.

**EnumType** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Член (ноль или более элементов)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **EnumType** элемент.

| Имя атрибута     | Необходимо | Значение                                                                                                                                                                                         |
|:-------------------|:------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name**           | Да         | Имя типа сущности.                                                                                                                                                                  |
| **IsFlags**        | Нет          | **Значение true,** или **False**, в зависимости от типа перечисления может использоваться как набор флагов. Значение по умолчанию — **False.**.                                                                     |
| **UnderlyingType** | Нет          | **Edm.Byte**, **Edm.Int16**, **Edm.Int32**, **Edm.Int64** или **Edm.SByte** Определение диапазона значений типа.   Является базовым типом перечисления элементов по умолчанию **Edm.Int32.**. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **EnumType** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **EnumType** элемент с тремя **член** элементов:

``` xml
 <EnumType Name="Color" IsFlags=”false” UnderlyingTyp=”Edm.Byte”>
   <Member Name="Red" />
   <Member Name="Green" />
   <Member Name="Blue" />
 </EntityType>
```
 

 

## <a name="function-element-csdl"></a>Элемент Function (CSDL)

**Функция** элемент на языке определения концептуальной схемы (CSDL) используется для определения или объявления функций в концептуальной модели. Функция определяется с помощью элемент DefiningExpression.  

Объект **функция** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Параметр (ноль или более элементов)
-   DefiningExpression (ноль или один элемент)
-   ReturnType (Function) (ноль или один элемент)
-   Элементы annotation (ноль или более элементов)

Возвращает объект типа для функции должен быть указан с помощью **ReturnType** элемент (Function) или **ReturnType** атрибутов (см. ниже), но не оба. Возвращаемым типом может быть EdmSimpleType, тип сущности, сложный тип, строковый тип, ссылочный тип или коллекция, которая включает один из этих типов.

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **функция** элемент.

| Имя атрибута | Необходимо | Значение                              |
|:---------------|:------------|:-----------------------------------|
| **Name**       | Да         | Имя функции.          |
| **ReturnType** | Нет          | Тип, возвращаемый функцией. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **функция** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере используется **функция** элемент, чтобы определить функцию, которая возвращает количество лет, так как инструктор был принят на работу.

``` xml
 <Function Name="YearsSince" ReturnType="Edm.Int32">
   <Parameter Name="date" Type="Edm.DateTime" />
   <DefiningExpression>
     Year(CurrentDateTime()) - Year(date)
   </DefiningExpression>
 </Function>
```
 

 

## <a name="functionimport-element-csdl"></a>Элемент FunctionImport (CSDL)

**FunctionImport** элемент на языке определения концептуальной схемы (CSDL) представляет функции, определенные в источнике данных, но доступна для объектов через концептуальную модель. Например элемента Function в модели хранения можно использовать для представления хранимой процедуры в базе данных. Объект **FunctionImport** элемента в концептуальной модели представляет соответствующую функцию в приложении Entity Framework и сопоставляется с функцией модели хранения с помощью элемента FunctionImportMapping. При вызове функции в приложении соответствующая хранимая процедура выполняется в базе данных.

**FunctionImport** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один допустимое количество элементов)
-   Параметр (ноль или более допустимое количество элементов)
-   Элементы annotation (ноль или более допустимое количество элементов)
-   ReturnType (FunctionImport) (ноль или более допустимое количество элементов)

Один **параметр** элемент должен быть определен для каждого параметра, принимаемого функцией.

Возвращает объект типа для функции должен быть указан с помощью **ReturnType** элемент (FunctionImport) или **ReturnType** атрибутов (см. ниже), но не оба. Типа возвращаемого значения должен быть коллекцией EdmSimpleType, тип EntityType или ComplexType.

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **FunctionImport** элемент.

| Имя атрибута   | Необходимо | Значение                                                                                                                                                                                                 |
|:-----------------|:------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name**         | Да         | Имя импортируемой функции.                                                                                                                                                                    |
| **ReturnType**   | Нет          | Тип, возвращаемый функцией. Не используйте этот атрибут, если функция не возвращает значение. В противном случае значение должно быть коллекция ComplexType, EntityType или EDMSimpleType.        |
| **Набор EntitySet**    | Нет          | Если функция возвращает коллекцию сущностей типов, значение **EntitySet** должен представлять собой набор сущностей, которому принадлежит коллекция. В противном случае **EntitySet** атрибут не должен использоваться. |
| **IsComposable** | Нет          | Если присвоено значение true, функция — композицию (Table-valued Function) и может использоваться в запросе LINQ.  Значение по умолчанию — **false**.                                                           |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **FunctionImport** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **FunctionImport** элемент, который принимает один параметр и возвращает коллекцию типов сущностей:

``` xml
 <FunctionImport Name="GetStudentGrades"
                 EntitySet="StudentGrade"
                 ReturnType="Collection(SchoolModel.StudentGrade)">
        <Parameter Name="StudentID" Mode="In" Type="Int32" />
 </FunctionImport>
```
 

 

## <a name="key-element-csdl"></a>Элемент Key (CSDL)

**Ключ** элемент является дочерним элементом элемента EntityType и определяет *ключ сущности* (свойство или набор свойств типа сущности, которые определяют идентификатор). Свойства, составляющие ключ сущности, выбираются во время разработки. Значения свойств ключа сущности должны уникально определять экземпляр типа сущности внутри набора сущностей во время выполнения. Свойства, составляющие ключ сущности, должны гарантировать уникальность экземпляра набора сущностей. **Ключ** элемент определяет ключ сущности, ссылаясь на одно или несколько свойств типа сущности.

**Ключ** элемент может иметь следующие дочерние элементы:

-   PropertyRef (один или несколько элементов)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **ключ** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В приведенном ниже примере определяется тип сущности с именем **книги**. Ключ сущности определяется ссылкой на **ISBN** свойство типа сущности.

``` xml
 <EntityType Name="Book">
   <Key>
     <PropertyRef Name="ISBN" />
   </Key>
   <Property Type="String" Name="ISBN" Nullable="false" />
   <Property Type="String" Name="Title" Nullable="false" />
   <Property Type="Decimal" Name="Revision" Nullable="false" Precision="29" Scale="29" />
   <NavigationProperty Name="Publisher" Relationship="BooksModel.PublishedBy"
                       FromRole="Book" ToRole="Publisher" />
   <NavigationProperty Name="Authors" Relationship="BooksModel.WrittenBy"
                       FromRole="Book" ToRole="Author" />
 </EntityType>
```
 

**ISBN** свойство является хорошим выбором для ключа сущности, поскольку международный стандартный номер книги (ISBN) уникально определяет книгу.

В следующем примере показано типа сущности (**автор**), имеет ключ сущности, состоящий из двух свойств **имя** и **адрес**.

``` xml
 <EntityType Name="Author">
   <Key>
     <PropertyRef Name="Name" />
     <PropertyRef Name="Address" />
   </Key>
   <Property Type="String" Name="Name" Nullable="false" />
   <Property Type="String" Name="Address" Nullable="false" />
   <NavigationProperty Name="Books" Relationship="BooksModel.WrittenBy"
                       FromRole="Author" ToRole="Book" />
 </EntityType>
```
 

С помощью **имя** и **адрес** для сущности, ключ является разумным выбором, поскольку двух авторов с тем же именем, скорее всего, live по тому же адресу. Однако такой выбор ключа сущности не гарантирует уникальность ключей сущности в наборе сущностей. Добавление свойства, такие как **AuthorId**, который может использоваться для уникальной идентификации автора в этом случае рекомендуется.

 

## <a name="member-element-csdl"></a>Элемент Member (CSDL)

**Член** элемент является дочерним элементом элемента EnumType и определяет член перечисляемого типа.

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **FunctionImport** элемент.

| Имя атрибута | Необходимо | Значение                                                                                                                                                                                    |
|:---------------|:------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name**       | Да         | Имя элемента.                                                                                                                                                                  |
| **Значение**      | Нет          | Значение элемента. По умолчанию первый элемент имеет значение 0, и значение каждого последующего перечислителя увеличивается на 1. Может существовать несколько членов с одинаковыми значениями. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **FunctionImport** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **EnumType** элемент с тремя **член** элементов:

``` xml
 <EnumType Name="Color">
   <Member Name="Red" Value=”1”/>
   <Member Name="Green" Value=”3” />
   <Member Name="Blue" Value=”5”/>
 </EntityType>
```
 

 

## <a name="navigationproperty-element-csdl"></a>Элемент NavigationProperty (CSDL)

Объект **NavigationProperty** элемент определяет свойство навигации, который предоставляет ссылку на другом конце ассоциации. В отличие от свойства, определенные в элементе свойства свойства навигации не определяют форму и характеристики данных. Они предоставляют возможность навигации по ассоциации между двумя типами сущностей.

Обратите внимание, что свойства навигации являются необязательными для обоих типов сущностей, расположенных в конечных элементах ассоциации. Если свойство навигации было определено для типа сущности на одном конечном элементе ассоциации, то определять его для типа сущности на другом конечном элементе необязательно.

Тип данных, возвращаемый свойством навигации, определяется кратностью в удаленном элементе ассоциации. Например, предположим, что свойство навигации, **OrdersNavProp**, существует на **клиента** типа сущности и устанавливает связь "один ко многим" между **клиента** и  **Порядок**. Так как конечная точка удаленной ассоциации для свойства навигации имеет кратность многие (\*), он имеет тип данных коллекции (из **порядок**). Аналогичным образом, если свойство навигации, **CustomerNavProp**, существует на **порядок** будет иметь тип сущности, тип данных **клиента** поскольку кратность удаленного конечного один (1).

Объект **NavigationProperty** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **NavigationProperty** элемент.

| Имя атрибута   | Необходимо | Значение                                                                                                                                                                                                                                            |
|:-----------------|:------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name**         | Да         | Имя свойства навигации.                                                                                                                                                                                                             |
| **Связь** | Да         | Имя ассоциации, расположенной в пределах области модели.                                                                                                                                                                                |
| **ToRole**       | Да         | Конечная точка ассоциации на которой заканчивается навигация. Значение **ToRole** атрибут должен быть таким же, как значение одного из **роли** атрибутами, определенными на одном из окончаний ассоциации (определенных в элементе AssociationEnd).       |
| **FromRole**     | Да         | Конечная точка ассоциации с которой начинается навигация. Значение **FromRole** атрибут должен быть таким же, как значение одного из **роли** атрибутами, определенными на одном из окончаний ассоциации (определенных в элементе AssociationEnd). |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **NavigationProperty** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере определяется тип сущности (**книги**) с двумя свойствами навигации (**PublishedBy** и **WrittenBy**):

``` xml
 <EntityType Name="Book">
   <Key>
     <PropertyRef Name="ISBN" />
   </Key>
   <Property Type="String" Name="ISBN" Nullable="false" />
   <Property Type="String" Name="Title" Nullable="false" />
   <Property Type="Decimal" Name="Revision" Nullable="false" Precision="29" Scale="29" />
   <NavigationProperty Name="Publisher" Relationship="BooksModel.PublishedBy"
                       FromRole="Book" ToRole="Publisher" />
   <NavigationProperty Name="Authors" Relationship="BooksModel.WrittenBy"
                       FromRole="Book" ToRole="Author" />
 </EntityType>
```
 

 

## <a name="ondelete-element-csdl"></a>Элемент OnDelete (CSDL)

**OnDelete** элемент на языке определения концептуальной схемы (CSDL) определяет поведение, связанное с ассоциацией. Если **действие** атрибуту присваивается **Cascade** на одном конце ассоциации, связанные с типами сущностей на другой стороне ассоциации удаляются при удалении типа сущности в первом элементе. Если связь между двумя типами сущностей связь «первичный ключ к первичному ключа», то загруженный зависимый объект удаляется при удалении главного объекта, на другом конце ассоциации вне зависимости от **OnDelete** Спецификация.  

> [!NOTE]
> **OnDelete** элемент влияет только на поведение во время выполнения приложения; он не влияет на поведение в источнике данных. Поведение, определенное в источнике данных, должно совпадать с поведением, определенным для приложения.

 

**OnDelete** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **OnDelete** элемент.

| Имя атрибута | Необходимо | Значение                                                                                                                                                                                                                         |
|:---------------|:------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Действие**     | Да         | **CASCADE** или **None**. Если **Cascade**, зависимые типы сущностей будут удалены при удалении основного типа сущности. Если **None**, зависимые типы сущностей не будут удалены при удалении основного типа сущности. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **ассоциации** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **ассоциации** элемент, определяющий **CustomerOrders** ассоциации. **OnDelete** элемент указывает, что все **заказы** , относящихся к конкретному **клиента** и были загружены в контекст ObjectContext будут удалены при  **Клиент** удаляется.

``` xml
 <Association Name="CustomerOrders">
   <End Type="ExampleModel.Customer" Role="Customer" Multiplicity="1">
         <OnDelete Action="Cascade" />
   </End>
   <End Type="ExampleModel.Order" Role="Order" Multiplicity="*" />
 </Association>
```
 

 

## <a name="parameter-element-csdl"></a>Элемент Parameter (CSDL)

**Параметр** элемент на языке определения концептуальной схемы (CSDL) может быть дочерний элемент FunctionImport, либо функция.

### <a name="functionimport-element-application"></a>Приложение, использующее элемент FunctionImport

Объект **параметр** элемент (как дочерний **FunctionImport** элемент) используется для определения входных и выходных параметров функций импорта, объявленных на языке CSDL.

**Параметр** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один допустимое количество элементов)
-   Элементы annotation (ноль или более допустимое количество элементов)

#### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **параметр** элемент.

| Имя атрибута | Необходимо | Значение                                                                                                                                                                                                                           |
|:---------------|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name**       | Да         | Имя параметра.                                                                                                                                                                                                      |
| **Type**       | Да         | Тип параметра. Значение должно быть **EDMSimpleType** или сложный тип, который находится в пределах области модели.                                                                                                             |
| **Режим**       | Нет          | **В**, **Out**, или **InOut** в зависимости от того, является ли параметр входной, выходной или параметр ввода вывода.                                                                                                                |
| **MaxLength**  | Нет          | Максимально допустимая длина параметра.                                                                                                                                                                                    |
| **Точность**  | Нет          | Точность параметра.                                                                                                                                                                                                 |
| **Масштаб**      | Нет          | Масштаб параметра.                                                                                                                                                                                                     |
| **SRID**       | Нет          | Идентификатор ссылки Пространственные системы. Допустимо только для параметров пространственных типов. Дополнительные сведения см. в разделе [SRID](http://en.wikipedia.org/wiki/SRID) и [SRID (SQL Server)](https://msdn.microsoft.com/library/bb964707.aspx). |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **параметр** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

#### <a name="example"></a>Пример

В следующем примере показан **FunctionImport** элемент с одним **параметр** дочерний элемент. Функция принимает один входной параметр и возвращает коллекцию типов сущностей.

``` xml
 <FunctionImport Name="GetStudentGrades"
                 EntitySet="StudentGrade"
                 ReturnType="Collection(SchoolModel.StudentGrade)">
        <Parameter Name="StudentID" Mode="In" Type="Int32" />
 </FunctionImport>
```
 

### <a name="function-element-application"></a>Приложение, использующее элемент Function

Объект **параметр** элемент (как дочерний **функция** элемент) определяет параметры для функций, определяемых или объявляемых в концептуальной модели.

**Параметр** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   CollectionType (ноль или один элемент)
-   ReferenceType (ноль или один элемент)
-   RowType (ноль или один элемент)

> [!NOTE]
> Только один из **CollectionType**, **ReferenceType**, или **RowType** элементов может быть дочерним элементом элемента **свойство** элемент.

 

-   Элементы annotation (ноль или более допустимое количество элементов)

> [!NOTE]
> Элементы Annotation должны следовать после всех остальных дочерних элементов. Элементы annotation допускаются только в том случае, в языке CSDL версии 2 и более поздних версий.

 

#### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **параметр** элемент.

| Имя атрибута   | Необходимо | Значение                                                                                                                                                                                                                           |
|:-----------------|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name**         | Да         | Имя параметра.                                                                                                                                                                                                      |
| **Type**         | Нет          | Тип параметра. Параметр может иметь любой из следующих типов (или быть коллекцией этих типов): <br/> **EdmSimpleType** <br/> тип сущности <br/> сложный тип <br/> тип строки <br/> ссылочный тип                             |
| **Допускающий значение NULL**     | Нет          | **Значение true,** (значение по умолчанию) или **False** в зависимости от того, может ли свойство иметь **null** значение.                                                                                                                          |
| **DefaultValue** | Нет          | Значение свойства по умолчанию.                                                                                                                                                                                              |
| **MaxLength**    | Нет          | Максимальная длина значения свойства.                                                                                                                                                                                       |
| **FixedLength**  | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка фиксированной длины.                                                                                                                          |
| **Точность**    | Нет          | Точность значения свойства.                                                                                                                                                                                            |
| **Масштаб**        | Нет          | Масштаб значения свойства.                                                                                                                                                                                                |
| **SRID**         | Нет          | Идентификатор ссылки Пространственные системы. Допустимо только для свойства пространственных типов. Дополнительные сведения см. в разделе [SRID](http://en.wikipedia.org/wiki/SRID) и [SRID (SQL Server)](https://msdn.microsoft.com/library/bb964707.aspx). |
| **Юникод**      | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка Юникода.                                                                                                                               |
| **Параметры сортировки**    | Нет          | Строка, указывающая последовательность сортировки, которая должна использоваться в источнике данных.                                                                                                                                                   |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **параметр** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

#### <a name="example"></a>Пример

В следующем примере показан **функция** элемент, который использует один **параметр** дочернего элемента для определения параметра функции.

``` xml
 <Function Name="GetYearsEmployed" ReturnType="Edm.Int32">
 <Parameter Name="Instructor" Type="SchoolModel.Person" />
   <DefiningExpression>
   Year(CurrentDateTime()) - Year(cast(Instructor.HireDate as DateTime))
   </DefiningExpression>
 </Function>
``` 

 

## <a name="principal-element-csdl"></a>Элемент Principal (CSDL)

**Участника** элемента на языке определения концептуальной схемы (CSDL) является дочерним элементом для элемента ReferentialConstraint, который определяет основной конец справочного ограничения. Объект **ReferentialConstraint** элемент определяет функциональные возможности, схожие с возможностями ограничения ссылочной целостности в реляционной базе данных. Свойство (или свойства) типа сущности могут ссылаться на ключ сущности в другом типе сущности также, как столбец (или столбцы) в таблице базы данных могут ссылаться на первичный ключ другой таблицы. Тип сущности, на который приведена ссылка называется *основного конца* ограничения. Тип сущности, который ссылается на основном конечном элементе называется *зависимого конца* ограничения. **PropertyRef** элементы, используемые для указания, какие ключи ссылается зависимый конечный.

**Участника** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   PropertyRef (один или несколько элементов)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **участника** элемент.

| Имя атрибута | Необходимо | Значение                                                                |
|:---------------|:------------|:---------------------------------------------------------------------|
| **Роль**       | Да         | Имя типа сущности в основном конце ассоциации. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **участника** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **ReferentialConstraint** элемент, который является частью определения **PublishedBy** ассоциации. **Идентификатор** свойство **издателя** тип сущности составляет основной конец справочного ограничения.

``` xml
 <Association Name="PublishedBy">
   <End Type="BooksModel.Book" Role="Book" Multiplicity="*" >
   </End>
   <End Type="BooksModel.Publisher" Role="Publisher" Multiplicity="1" />
   <ReferentialConstraint>
     <Principal Role="Publisher">
       <PropertyRef Name="Id" />
     </Principal>
     <Dependent Role="Book">
       <PropertyRef Name="PublisherId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```
 

 

## <a name="property-element-csdl"></a>Элемент Property (CSDL)

**Свойство** элемент на языке определения концептуальной схемы (CSDL) может быть дочерний элемент EntityType, ComplexType-элемент или элемент RowType.

### <a name="entitytype-and-complextype-element-applications"></a>Применение элементов EntityType и ComplexType

**Свойство** элементов (как дочерние элементы **EntityType** или **ComplexType** элементы) определяют форму и характеристики данных, который будет содержать экземпляр типа сущности или сложного типа . Свойства в концептуальной модели аналогичны свойствам, которые определены в классе. По такому же принципу, как свойства, относящиеся к классу, определяют форму класса и несут информацию об объектах, свойства в концептуальной модели определяют форму типа сущности и несут информацию об экземплярах типа сущности.

**Свойство** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Элемент Documentation (ноль или один допустимое количество элементов)
-   Элементы annotation (ноль или более допустимое количество элементов)

Следующие аспекты, которые могут применяться к **свойство** элемент: **Nullable**, **DefaultValue**, **MaxLength**,  **FixedLength**, **точности**, **масштабирования**, **Юникода**, **параметры сортировки**,  **ConcurrencyMode**. Аспекты представляют собой атрибуты XML, которые предоставляют сведения о том, как значения свойств хранятся в хранилище данных.

> [!NOTE]
> Аспекты может применяться только к свойствам этого типа **EDMSimpleType**.

 

#### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **свойство** элемент.

| Имя атрибута                                                         | Необходимо | Значение                                                                                                                                                                                                                           |
|:-----------------------------------------------------------------------|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name**                                                               | Да         | Имя свойства.                                                                                                                                                                                                       |
| **Type**                                                               | Да         | Тип значения свойства. Тип значения свойства должен быть **EDMSimpleType** или сложного типа (указано в полное доменное имя), который находится в пределах области модели.                                                 |
| **Допускающий значение NULL**                                                           | Нет          | **Значение true,** (значение по умолчанию) или <strong>False</strong> в зависимости от того, может ли свойство иметь значение null. <br/> [!NOTE]                                                                                                   |
| > В языке CSDL v1 должен иметь свойство сложного типа `Nullable="False"`. |             |                                                                                                                                                                                                                                 |
| **DefaultValue**                                                       | Нет          | Значение свойства по умолчанию.                                                                                                                                                                                              |
| **MaxLength**                                                          | Нет          | Максимальная длина значения свойства.                                                                                                                                                                                       |
| **FixedLength**                                                        | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка фиксированной длины.                                                                                                                          |
| **Точность**                                                          | Нет          | Точность значения свойства.                                                                                                                                                                                            |
| **Масштаб**                                                              | Нет          | Масштаб значения свойства.                                                                                                                                                                                                |
| **SRID**                                                               | Нет          | Идентификатор ссылки Пространственные системы. Допустимо только для свойства пространственных типов. Дополнительные сведения см. в разделе [SRID](http://en.wikipedia.org/wiki/SRID) и [SRID (SQL Server)](https://msdn.microsoft.com/library/bb964707.aspx). |
| **Юникод**                                                            | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка Юникода.                                                                                                                               |
| **Параметры сортировки**                                                          | Нет          | Строка, указывающая последовательность сортировки, которая должна использоваться в источнике данных.                                                                                                                                                   |
| **ConcurrencyMode**                                                    | Нет          | **Нет** (значение по умолчанию) или **Fixed**. Если присвоено значение **Fixed**, значение свойства будет использоваться в проверках оптимистичного параллелизма.                                                                                  |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **свойство** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

#### <a name="example"></a>Пример

В следующем примере показан **EntityType** элемент с тремя **свойство** элементов:

``` xml
 <EntityType Name="Book">
   <Key>
     <PropertyRef Name="ISBN" />
   </Key>
   <Property Type="String" Name="ISBN" Nullable="false" />
   <Property Type="String" Name="Title" Nullable="false" />
   <Property Type="Decimal" Name="Revision" Nullable="false" Precision="29" Scale="29" />
   <NavigationProperty Name="Publisher" Relationship="BooksModel.PublishedBy"
                       FromRole="Book" ToRole="Publisher" />
   <NavigationProperty Name="Authors" Relationship="BooksModel.WrittenBy"
                       FromRole="Book" ToRole="Author" />
 </EntityType>
```
 

В следующем примере показан **ComplexType** элемент с пятью **свойство** элементов:

``` xml
 <ComplexType Name="Address" >
   <Property Type="String" Name="StreetAddress" Nullable="false" />
   <Property Type="String" Name="City" Nullable="false" />
   <Property Type="String" Name="StateOrProvince" Nullable="false" />
   <Property Type="String" Name="Country" Nullable="false" />
   <Property Type="String" Name="PostalCode" Nullable="false" />
 </ComplexType>
```
 

### <a name="rowtype-element-application"></a>Применение элемента RowType

**Свойство** элементы (будучи дочерними по отношению **RowType** элемент) определяют форму и характеристики данных, который может быть передан или возвращаемых определяемой моделью функции.  

**Свойство** элемент может иметь только один из следующих дочерних элементов:

-   CollectionType
-   ReferenceType
-   RowType

**Свойство** элемент может иметь любое число дочерних элементов заметки.

> [!NOTE]
> Элементы annotation допускаются только в том случае, в языке CSDL версии 2 и более поздних версий.

 

#### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **свойство** элемент.

| Имя атрибута                                                     | Необходимо | Значение                                                                                                                                                                                                                           |
|:-------------------------------------------------------------------|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name**                                                           | Да         | Имя свойства.                                                                                                                                                                                                       |
| **Type**                                                           | Да         | Тип значения свойства.                                                                                                                                                                                                 |
| **Допускающий значение NULL**                                                       | Нет          | **Значение true,** (значение по умолчанию) или **False** в зависимости от того, может ли свойство иметь значение null. <br/> [!NOTE]                                                                                                                |
| > В языке CSDL v1 должен иметь свойство сложного типа `Nullable="False"`. |             |                                                                                                                                                                                                                                 |
| **DefaultValue**                                                   | Нет          | Значение свойства по умолчанию.                                                                                                                                                                                              |
| **MaxLength**                                                      | Нет          | Максимальная длина значения свойства.                                                                                                                                                                                       |
| **FixedLength**                                                    | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка фиксированной длины.                                                                                                                          |
| **Точность**                                                      | Нет          | Точность значения свойства.                                                                                                                                                                                            |
| **Масштаб**                                                          | Нет          | Масштаб значения свойства.                                                                                                                                                                                                |
| **SRID**                                                           | Нет          | Идентификатор ссылки Пространственные системы. Допустимо только для свойства пространственных типов. Дополнительные сведения см. в разделе [SRID](http://en.wikipedia.org/wiki/SRID) и [SRID (SQL Server)](https://msdn.microsoft.com/library/bb964707.aspx). |
| **Юникод**                                                        | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка Юникода.                                                                                                                               |
| **Параметры сортировки**                                                      | Нет          | Строка, указывающая последовательность сортировки, которая должна использоваться в источнике данных.                                                                                                                                                   |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **свойство** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

#### <a name="example"></a>Пример

В следующем примере показан **свойство** элементы, используемые для определения вида тип возвращаемого значения определяемой моделью функции.

``` xml
 <Function Name="LastNamesAfter">
   <Parameter Name="someString" Type="Edm.String" />
   <ReturnType>
    <CollectionType>
      <RowType>
        <Property Name="FirstName" Type="Edm.String" Nullable="false" />
        <Property Name="LastName" Type="Edm.String" Nullable="false" />
      </RowType>
    </CollectionType>
   </ReturnType>
   <DefiningExpression>
             SELECT VALUE ROW(p.FirstName, p.LastName)
             FROM SchoolEntities.People AS p
             WHERE p.LastName &gt;= somestring
   </DefiningExpression>
 </Function>
```
 

 

## <a name="propertyref-element-csdl"></a>Элемент PropertyRef (CSDL)

**PropertyRef** элемент на языке определения концептуальной схемы (CSDL) ссылается на свойство типа сущности, чтобы указать, что свойство будет выступать в одной из следующих ролей:

-   Часть ключа сущности (является свойством или набором свойств типа сущности, которые определяют идентификатор). Один или несколько **PropertyRef** элементы можно использовать для определения ключа сущности.
-   Зависимый или основной конец справочного ограничения.

**PropertyRef** элемент может содержать только элементы annotation (ноль и более) как дочерние элементы.

> [!NOTE]
> Элементы annotation допускаются только в том случае, в языке CSDL версии 2 и более поздних версий.

 

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **PropertyRef** элемент.

| Имя атрибута | Необходимо | Значение                                |
|:---------------|:------------|:-------------------------------------|
| **Name**       | Да         | Имя свойства, на которое дается ссылка. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **PropertyRef** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В приведенном ниже примере определяется тип сущности (**книги**). Ключ сущности определяется ссылкой на **ISBN** свойство типа сущности.

``` xml
 <EntityType Name="Book">
   <Key>
     <PropertyRef Name="ISBN" />
   </Key>
   <Property Type="String" Name="ISBN" Nullable="false" />
   <Property Type="String" Name="Title" Nullable="false" />
   <Property Type="Decimal" Name="Revision" Nullable="false" Precision="29" Scale="29" />
   <NavigationProperty Name="Publisher" Relationship="BooksModel.PublishedBy"
                       FromRole="Book" ToRole="Publisher" />
   <NavigationProperty Name="Authors" Relationship="BooksModel.WrittenBy"
                       FromRole="Book" ToRole="Author" />
 </EntityType>
```
 

В следующем примере два **PropertyRef** элементов используются для указания, что два свойства (**идентификатор** и **PublisherId**) являются основным и зависимым окончания ссылочном ограничение.

``` xml
 <Association Name="PublishedBy">
   <End Type="BooksModel.Book" Role="Book" Multiplicity="*" >
   </End>
   <End Type="BooksModel.Publisher" Role="Publisher" Multiplicity="1" />
   <ReferentialConstraint>
     <Principal Role="Publisher">
       <PropertyRef Name="Id" />
     </Principal>
     <Dependent Role="Book">
       <PropertyRef Name="PublisherId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```
 

 

## <a name="referencetype-element-csdl"></a>Элемент ReferenceType (CSDL)

**ReferenceType** элемент на языке определения концептуальной схемы (CSDL) задает ссылку на тип сущности. **ReferenceType** элемент может быть дочерним элементом следующих элементов:

-   ReturnType (функция)
-   Параметр
-   CollectionType

**ReferenceType** элемент используется при задании параметра или возвращаемого типа для функции.

Объект **ReferenceType** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **ReferenceType** элемент.

| Имя атрибута | Необходимо | Значение                                         |
|:---------------|:------------|:----------------------------------------------|
| **Type**       | Да         | Имя типа сущности, на который делается ссылка. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **ReferenceType** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **ReferenceType** элемент, используемый в качестве дочернего элемента **параметр** элемент в определяемой моделью функции, которая принимает ссылку на **Person** сущности Тип:

``` xml
 <Function Name="GetYearsEmployed" ReturnType="Edm.Int32">
   <Parameter Name="instructor">
     <ReferenceType Type="SchoolModel.Person" />
   </Parameter>
   <DefiningExpression>
   Year(CurrentDateTime()) - Year(cast(instructor.HireDate as DateTime))
   </DefiningExpression>
 </Function>
```
 

В следующем примере показан **ReferenceType** элемент, используемый в качестве дочернего элемента **ReturnType** элемент (Function) в определяемой моделью функции, которая возвращает ссылку на **Person**типа сущности:

``` xml
 <Function Name="GetPersonReference">
     <Parameter Name="p" Type="SchoolModel.Person" />
     <ReturnType>
         <ReferenceType Type="SchoolModel.Person" />
     </ReturnType>
     <DefiningExpression>
           REF(p)
     </DefiningExpression>
 </Function>
```
 

 

## <a name="referentialconstraint-element-csdl"></a>Элемент ReferentialConstraint (CSDL)

Объект **ReferentialConstraint** элемент на языке определения концептуальной схемы (CSDL) определяет функциональные возможности, схожие с возможностями ограничения ссылочной целостности в реляционной базе данных. Свойство (или свойства) типа сущности могут ссылаться на ключ сущности в другом типе сущности также, как столбец (или столбцы) в таблице базы данных могут ссылаться на первичный ключ другой таблицы. Тип сущности, на который приведена ссылка называется *основного конца* ограничения. Тип сущности, который ссылается на основном конечном элементе называется *зависимого конца* ограничения.

Если внешний ключ, который предоставляется в одном типе сущности, ссылается на свойство другого типа сущности, **ReferentialConstraint** элемент определяет ассоциацию между двумя типами сущностей. Так как **ReferentialConstraint** элемент предоставляет связанные сведения о том, как два типа сущностей, соответствующий элемент AssociationSetMapping не является необходимым в язык определения сопоставлений (MSL). Связь между двумя типами сущностей, у которых нет представленных внешних ключей должна иметь соответствующий **AssociationSetMapping** элемент для сопоставления сведений об ассоциации с источником данных.

Если внешний ключ недоступен для типа сущности **ReferentialConstraint** элемент можно определить только ключ к первичному ограничение первичного ключа между типом сущности и другого типа сущности.

Объект **ReferentialConstraint** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Участник (ровно один элемент)
-   Зависимые (ровно один элемент)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

**ReferentialConstraint** элемент может иметь любое количество атрибутов annotation (настраиваемых атрибутов XML). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан **ReferentialConstraint** элемента, используемого в качестве части определения **PublishedBy** ассоциации.

``` xml
 <Association Name="PublishedBy">
   <End Type="BooksModel.Book" Role="Book" Multiplicity="*" >
   </End>
   <End Type="BooksModel.Publisher" Role="Publisher" Multiplicity="1" />
   <ReferentialConstraint>
     <Principal Role="Publisher">
       <PropertyRef Name="Id" />
     </Principal>
     <Dependent Role="Book">
       <PropertyRef Name="PublisherId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```
 

 

## <a name="returntype-function-element-csdl"></a>Элемент ReturnType (Function) (язык CSDL)

**ReturnType** элемент (функция) в языке определения концептуальных схем (CSDL) определяет тип возвращаемого значения для функции, которая определяется в элементе функции. Тип возвращаемого значения также можно задать с помощью функции **ReturnType** атрибута.

Возвращаемым типом может быть любой **EdmSimpleType**, тип сущности, сложный тип, тип строки, ссылочный тип или коллекцию из одного из этих типов.

Тип возвращаемого значения функции, которые можно указать с помощью **тип** атрибут **ReturnType** элемент (Function), или с помощью одного из следующих дочерних элементов:

-   CollectionType
-   ReferenceType
-   RowType

> [!NOTE]
> Модель не пройдет проверку, если указан возвращаемый тип с обоими функции **тип** атрибут **ReturnType** (функция) и с помощью одного из дочерних элементов.

 

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **ReturnType** элемент (Function).

| Имя атрибута | Необходимо | Значение                              |
|:---------------|:------------|:-----------------------------------|
| **ReturnType** | Нет          | Тип, возвращаемый функцией. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **ReturnType** элемент (Function). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере используется **функция** для определения функции, которая возвращает количество книги кондиционирования в годах печати. Обратите внимание, что тип возвращаемого значения определяется **тип** атрибут **ReturnType** элемент (Function).

``` xml
 <Function Name="GetYearsInPrint">
   <ReturnType Type=="Edm.Int32">
   <Parameter Name="book" Type="BooksModel.Book" />
   <DefiningExpression>
    Year(CurrentDateTime()) - Year(cast(book.PublishedDate as DateTime))
   </DefiningExpression>
 </Function>
```
 

 

## <a name="returntype-functionimport-element-csdl"></a>Элемент ReturnType (FunctionImport) (язык CSDL)

**ReturnType** элемент (FunctionImport) на языке определения концептуальной схемы (CSDL) определяет тип возвращаемого значения для функции, которая определена в элемент FunctionImport. Тип возвращаемого значения также можно задать с помощью функции **ReturnType** атрибута.

Возвращаемым типом может быть любой коллекции типа сущности, сложный тип или **EdmSimpleType**,

Тип возвращаемого значения функции указан с **тип** атрибут **ReturnType** элемент (FunctionImport).

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **ReturnType** элемент (FunctionImport).

| Имя атрибута | Необходимо | Значение                                                                                                                                                                                                 |
|:---------------|:------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Type**       | Нет          | Тип, возвращаемый функцией. Значение должно быть коллекция ComplexType, EntityType или EDMSimpleType.                                                                                      |
| **Набор EntitySet**  | Нет          | Если функция возвращает коллекцию сущностей типов, значение **EntitySet** должен представлять собой набор сущностей, которому принадлежит коллекция. В противном случае **EntitySet** атрибут не должен использоваться. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **ReturnType** элемент (FunctionImport). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере используется **FunctionImport** , возвращающий книги и издателей. Обратите внимание, что функция возвращает два результирующих набора и, следовательно, две **ReturnType** указаны элементы (FunctionImport).

``` xml
 <FunctionImport Name="GetBooksAndPublishers">
   <ReturnType Type=="Collection(BooksModel.Book )" EntitySet=”Books”>
   <ReturnType Type=="Collection(BooksModel.Publisher)" EntitySet=”Publishers”>
 </FunctionImport>
```
 

 

## <a name="rowtype-element-csdl"></a>Элемент RowType (язык CSDL)

Объект **RowType** элемента на языке определения концептуальной схемы (CSDL) определяет безымянную структуру в качестве параметра или тип возвращаемого значения для функции, определенной в концептуальной модели.

Объект **RowType** элемент может быть дочерним элементом следующих элементов:

-   CollectionType
-   Параметр
-   ReturnType (функция)

Объект **RowType** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Свойство (один или несколько)
-   Элементы annotation (ноль и более)

### <a name="applicable-attributes"></a>Применимые атрибуты

Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **RowType** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показано определяемой моделью функции, который использует **CollectionType** элемента, чтобы указать, что функция возвращает коллекцию строк (как указано в **RowType** элемент).

``` xml
 <Function Name="LastNamesAfter">
   <Parameter Name="someString" Type="Edm.String" />
   <ReturnType>
    <CollectionType>
      <RowType>
        <Property Name="FirstName" Type="Edm.String" Nullable="false" />
        <Property Name="LastName" Type="Edm.String" Nullable="false" />
      </RowType>
    </CollectionType>
   </ReturnType>
   <DefiningExpression>
             SELECT VALUE ROW(p.FirstName, p.LastName)
             FROM SchoolEntities.People AS p
             WHERE p.LastName &gt;= somestring
   </DefiningExpression>
 </Function>
```

## <a name="schema-element-csdl"></a>Элемент Schema (CSDL)

**Схемы** элемент является корневым элементом определения концептуальной модели. Он содержит определения объектов, функций и контейнеров, из которых состоит концептуальная модель.

**Схемы** элемент может содержать ноль или более следующих дочерних элементов:

-   Using
-   EntityContainer
-   EntityType
-   EnumType
-   Ассоциация
-   ComplexType
-   Функция

Объект **схемы** элемент может содержать ноль или один элемент заметки.

> [!NOTE]
> **Функция** элементов и элементы annotation допускаются только в версии языка CSDL 2 и более поздних версий.

 

**Схемы** элемент использует **пространства имен** атрибут для определения пространства имен для типа сущности, сложный тип и объектов ассоциации в концептуальной модели. В пространстве имен не может быть двух объектов с одинаковым именем. Пространства имен может быть несколько **схемы** элементов и несколько файлов с расширением CSDL.

Пространство имен концептуальной модели отличается от пространства имен XML элемента **схемы** элемент. Пространство имен концептуальной модели (как определено **пространства имен** атрибут) — это логический контейнер для типов сущностей, сложные типы и типы ассоциаций. Пространство имен XML (обозначается **xmlns** атрибут) из **схемы** элемент является пространство имен по умолчанию для дочерних элементов и атрибутов из **схемы** элемент. Пространства имен XML вида http://schemas.microsoft.com/ado/YYYY/MM/edm (где YYYY и MM представляют год и месяц соответственно) зарезервированы для CSDL. Пользовательские элементы и атрибуты не могут присутствовать в пространствах имен такого вида.

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описываются атрибуты могут применяться к **схемы** элемент.

| Имя атрибута | Необходимо | Значение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|:---------------|:------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Пространство имен**  | Да         | Пространство имен концептуальной модели. Значение **пространства имен** атрибут используется, чтобы сформировать полное имя типа. Например если **EntityType** с именем *клиента* находится в пространстве имен Simple.Example.Model, а затем полностью квалифицированное имя **EntityType** является SimpleExampleModel.Customer. <br/> Следующие строки не может использоваться как значение для **пространства имен** атрибут: **системы**, **временных**, или **Edm**. Значение для **пространства имен** атрибут не может быть таким же, как значение для **пространства имен** атрибут в элементе SSDL-схеме. |
| **Alias**      | Нет          | Идентификатор, используемый в качестве имени пространства имен. Например если **EntityType** с именем *клиента* находится в пространстве имен Simple.Example.Model, а значение **псевдоним** атрибут *модели*, то в качестве полное доменное имя можно указать Model.Customer **EntityType.**                                                                                                                                                                                                                                                                                                     |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **схемы** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показан **схемы** элемент, содержащий **EntityContainer** элемент, двух **EntityType** элементов и один **ассоциации** элемент.

``` xml
 <Schema xmlns="http://schemas.microsoft.com/ado/2009/11/edm"
      xmlns:cg="http://schemas.microsoft.com/ado/2009/11/codegeneration"
      xmlns:store="http://schemas.microsoft.com/ado/2009/11/edm/EntityStoreSchemaGenerator"
       Namespace="ExampleModel" Alias="Self">
         <EntityContainer Name="ExampleModelContainer">
           <EntitySet Name="Customers"
                      EntityType="ExampleModel.Customer" />
           <EntitySet Name="Orders" EntityType="ExampleModel.Order" />
           <AssociationSet
                       Name="CustomerOrder"
                       Association="ExampleModel.CustomerOrders">
             <End Role="Customer" EntitySet="Customers" />
             <End Role="Order" EntitySet="Orders" />
           </AssociationSet>
         </EntityContainer>
         <EntityType Name="Customer">
           <Key>
             <PropertyRef Name="CustomerId" />
           </Key>
           <Property Type="Int32" Name="CustomerId" Nullable="false" />
           <Property Type="String" Name="Name" Nullable="false" />
           <NavigationProperty
                    Name="Orders"
                    Relationship="ExampleModel.CustomerOrders"
                    FromRole="Customer" ToRole="Order" />
         </EntityType>
         <EntityType Name="Order">
           <Key>
             <PropertyRef Name="OrderId" />
           </Key>
           <Property Type="Int32" Name="OrderId" Nullable="false" />
           <Property Type="Int32" Name="ProductId" Nullable="false" />
           <Property Type="Int32" Name="Quantity" Nullable="false" />
           <NavigationProperty
                    Name="Customer"
                    Relationship="ExampleModel.CustomerOrders"
                    FromRole="Order" ToRole="Customer" />
           <Property Type="Int32" Name="CustomerId" Nullable="false" />
         </EntityType>
         <Association Name="CustomerOrders">
           <End Type="ExampleModel.Customer"
                Role="Customer" Multiplicity="1" />
           <End Type="ExampleModel.Order"
                Role="Order" Multiplicity="*" />
           <ReferentialConstraint>
             <Principal Role="Customer">
               <PropertyRef Name="CustomerId" />
             </Principal>
             <Dependent Role="Order">
               <PropertyRef Name="CustomerId" />
             </Dependent>
           </ReferentialConstraint>
         </Association>
       </Schema>
```
 

 

## <a name="typeref-element-csdl"></a>Элемент TypeRef (CSDL)

**TypeRef** элемент на языке определения концептуальной схемы (CSDL) предоставляет ссылку на существующий именованный тип. **TypeRef** элемент может быть дочерним элементом элемента CollectionType, который используется для указания, что функция имеет коллекцию в качестве параметра или возвращаемого типа.

Объект **TypeRef** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   Документация (ноль или один элемент)
-   Элементы annotation (ноль или более элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые могут применяться к **TypeRef** элемент. Обратите внимание, что **DefaultValue**, **MaxLength**, **FixedLength**, **точности**, **масштабирования**,  **Юникод**, и **параметры сортировки** атрибуты применимы только к **EDMSimpleTypes**.

| Имя атрибута                                                     | Необходимо | Значение                                                                                                                                                                                                                           |
|:-------------------------------------------------------------------|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Type**                                                           | Нет          | Имя типа, на который дается ссылка.                                                                                                                                                                                          |
| **Допускающий значение NULL**                                                       | Нет          | **Значение true,** (значение по умолчанию) или **False** в зависимости от того, может ли свойство иметь значение null. <br/> [!NOTE]                                                                                                                |
| > В языке CSDL v1 должен иметь свойство сложного типа `Nullable="False"`. |             |                                                                                                                                                                                                                                 |
| **DefaultValue**                                                   | Нет          | Значение свойства по умолчанию.                                                                                                                                                                                              |
| **MaxLength**                                                      | Нет          | Максимальная длина значения свойства.                                                                                                                                                                                       |
| **FixedLength**                                                    | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка фиксированной длины.                                                                                                                          |
| **Точность**                                                      | Нет          | Точность значения свойства.                                                                                                                                                                                            |
| **Масштаб**                                                          | Нет          | Масштаб значения свойства.                                                                                                                                                                                                |
| **SRID**                                                           | Нет          | Идентификатор ссылки Пространственные системы. Допустимо только для свойства пространственных типов. Дополнительные сведения см. в разделе [SRID](http://en.wikipedia.org/wiki/SRID) и [SRID (SQL Server)](https://msdn.microsoft.com/library/bb964707.aspx). |
| **Юникод**                                                        | Нет          | **Значение true,** или **False** в зависимости от того, будет ли значение свойства храниться как строка Юникода.                                                                                                                               |
| **Параметры сортировки**                                                      | Нет          | Строка, указывающая последовательность сортировки, которая должна использоваться в источнике данных.                                                                                                                                                   |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **CollectionType** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере показано определяемой моделью функции, который использует **TypeRef** элемент (как дочерний **CollectionType** элемент) для указания, что функция принимает коллекцию  **Отдел** типов сущностей.

``` xml
 <Function Name="GetAvgBudget">
      <Parameter Name="Departments">
          <CollectionType>
             <TypeRef Type="SchoolModel.Department"/>
          </CollectionType>
           </Parameter>
       <ReturnType Type="Collection(Edm.Decimal)"/>
       <DefiningExpression>
             SELECT VALUE AVG(d.Budget) FROM Departments AS d
       </DefiningExpression>
 </Function>
```
 

 

## <a name="using-element-csdl"></a>Элемент Using (CSDL)

**Using** элемента на языке определения концептуальной схемы (CSDL) импортирует содержимое концептуальной модели, который существует в другом пространстве имен. Установив значение **пространства имен** атрибут, можно ссылаться на типы сущностей, сложные типы и типы ассоциаций, которые определены в другой концептуальной модели. Более одного **Using** элемент может быть дочерним элементом **схемы** элемент.

> [!NOTE]
> **Using** элемента на языке CSDL не работает абсолютно идентично **с помощью** инструкции на языке программирования. Путем импорта пространства имен с **с помощью** инструкции на языке программирования, вы не влияют на объекты в исходном пространстве имен. В языке CSDL импортированное пространство имен может содержать тип сущности, производный от типа сущности в исходном пространстве имен. Это может влиять на наборы сущностей, объявленные в исходном пространстве имен.

 

**Using** элемент может иметь следующие дочерние элементы:

-   Документация (ноль или один допустимое количество элементов)
-   Элементы annotation (ноль или более допустимое количество элементов)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описываются атрибуты могут применяться к **Using** элемент.

| Имя атрибута | Необходимо | Значение                                                                                                                                                                              |
|:---------------|:------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Пространство имен**  | Да         | Имя импортируемого пространства имен.                                                                                                                                                |
| **Alias**      | Да         | Идентификатор, используемый в качестве имени пространства имен. Хотя этот атрибут является обязательным, необязательно, чтобы он использовался вместо имени пространства имен при указании имен объектов. |

 

> [!NOTE]
> Любое количество атрибутов annotation (настраиваемых атрибутов XML), которые могут быть применены к **Using** элемент. Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

 

### <a name="example"></a>Пример

В следующем примере демонстрируется **Using** элемента, используемого для импорта пространства имен, определенный в другом. Обратите внимание, что пространство имен для **схемы** является элемент, показанный `BooksModel`. `Address` Свойство `Publisher` **EntityType** — это сложный тип, который определен в `ExtendedBooksModel` пространства имен (импортированы с **Using** элемент).

``` xml
 <Schema xmlns="http://schemas.microsoft.com/ado/2009/11/edm"
           xmlns:cg="http://schemas.microsoft.com/ado/2009/11/codegeneration"
           xmlns:store="http://schemas.microsoft.com/ado/2009/11/edm/EntityStoreSchemaGenerator"
           Namespace="BooksModel" Alias="Self">

     <Using Namespace="BooksModel.Extended" Alias="BMExt" />

 <EntityContainer Name="BooksContainer" >
       <EntitySet Name="Publishers" EntityType="BooksModel.Publisher" />
     </EntityContainer>

 <EntityType Name="Publisher">
       <Key>
         <PropertyRef Name="Id" />
       </Key>
       <Property Type="Int32" Name="Id" Nullable="false" />
       <Property Type="String" Name="Name" Nullable="false" />
       <Property Type="BMExt.Address" Name="Address" Nullable="false" />
     </EntityType>

 </Schema>
```
 

 

## <a name="annotation-attributes-csdl"></a>Атрибуты примечаний (CSDL)

Атрибуты annotation в языке CSDL представляют собой настраиваемые атрибуты XML в концептуальной модели. Атрибуты annotation должны не только иметь допустимую структуру XML, но и соответствовать следующим требованиям:

-   Атрибуты annotation не должны находиться ни в одном пространстве имен XML, которое зарезервировано для языка CSDL.
-   К данному конкретному элементу языка CSDL может применяться несколько атрибутов annotation.
-   Полные имена любых двух атрибутов annotation не должны совпадать.

Атрибуты annotation могут использоваться для предоставления дополнительных метаданных об элементах в концептуальной модели. Метаданные, содержащиеся в элементах annotation может осуществляться во время выполнения с помощью классов в пространстве имен System.Data.Metadata.Edm.

### <a name="example"></a>Пример

В следующем примере показан **EntityType** элемент с атрибутом annotation (**CustomAttribute**). В следующем примере показано применение элемента annotation к элементам типа сущности.

``` xml
 <Schema Namespace="SchoolModel" Alias="Self"
         xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation"
         xmlns="http://schemas.microsoft.com/ado/2009/11/edm">
   <EntityContainer Name="SchoolEntities" annotation:LazyLoadingEnabled="true">
     <EntitySet Name="People" EntityType="SchoolModel.Person" />
   </EntityContainer>
   <EntityType Name="Person" xmlns:p="http://CustomNamespace.com"
               p:CustomAttribute="Data here.">
     <Key>
       <PropertyRef Name="PersonID" />
     </Key>
     <Property Name="PersonID" Type="Int32" Nullable="false"
               annotation:StoreGeneratedPattern="Identity" />
     <Property Name="LastName" Type="String" Nullable="false"
               MaxLength="50" Unicode="true" FixedLength="false" />
     <Property Name="FirstName" Type="String" Nullable="false"
               MaxLength="50" Unicode="true" FixedLength="false" />
     <Property Name="HireDate" Type="DateTime" />
     <Property Name="EnrollmentDate" Type="DateTime" />
     <p:CustomElement>
       Custom metadata.
     </p:CustomElement>
   </EntityType>
 </Schema>
```
 

Следующий код извлекает метаданные из атрибута annotation и выводит их на консоль:

``` xml
 EdmItemCollection collection = new EdmItemCollection("School.csdl");
 MetadataWorkspace workspace = new MetadataWorkspace();
 workspace.RegisterItemCollection(collection);
 EdmType contentType;
 workspace.TryGetType("Person", "SchoolModel", DataSpace.CSpace, out contentType);
 if (contentType.MetadataProperties.Contains("http://CustomNamespace.com:CustomAttribute"))
 {
     MetadataProperty annotationProperty =
         contentType.MetadataProperties["http://CustomNamespace.com:CustomAttribute"];
     object annotationValue = annotationProperty.Value;
     Console.WriteLine(annotationValue.ToString());
 }
```
 

Вышеуказанный код предполагает, что файл `School.csdl` находится в выходном каталоге проекта, а в проект добавлены инструкции `Imports` и `Using`:

``` csharp
 using System.Data.Metadata.Edm;
```
 

 

## <a name="annotation-elements-csdl"></a>Элементы примечаний (CSDL)

Элементы annotation в языке CSDL представляют собой настраиваемые элементы XML в концептуальной модели. Элементы annotation должны не только иметь допустимую структуру XML, но и соответствовать следующим требованиям:

-   Элементы annotation не должны находиться в каком-либо пространстве имен XML, которое зарезервировано для языка CSDL.
-   У данного элемента языка CSDL может быть больше одного дочернего элемента annotation.
-   Полные имена любых двух элементов annotation не должны совпадать.
-   Элементы annotation должны находиться после всех остальных дочерних элементов в данном элементе CSDL.

Элементы annotation могут использоваться для предоставления дополнительных метаданных об элементах в концептуальной модели. Начиная с .NET Framework версии 4, метаданные, содержащиеся в элементах annotation может осуществляться во время выполнения с помощью классов в пространстве имен System.Data.Metadata.Edm.

### <a name="example"></a>Пример

В следующем примере показан **EntityType** элемент с элементом annotation (**CustomElement**). В следующем примере показано применение атрибута annotation к элементам типа сущности.

``` xml
 <Schema Namespace="SchoolModel" Alias="Self"
         xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation"
         xmlns="http://schemas.microsoft.com/ado/2009/11/edm">
   <EntityContainer Name="SchoolEntities" annotation:LazyLoadingEnabled="true">
     <EntitySet Name="People" EntityType="SchoolModel.Person" />
   </EntityContainer>
   <EntityType Name="Person" xmlns:p="http://CustomNamespace.com"
               p:CustomAttribute="Data here.">
     <Key>
       <PropertyRef Name="PersonID" />
     </Key>
     <Property Name="PersonID" Type="Int32" Nullable="false"
               annotation:StoreGeneratedPattern="Identity" />
     <Property Name="LastName" Type="String" Nullable="false"
               MaxLength="50" Unicode="true" FixedLength="false" />
     <Property Name="FirstName" Type="String" Nullable="false"
               MaxLength="50" Unicode="true" FixedLength="false" />
     <Property Name="HireDate" Type="DateTime" />
     <Property Name="EnrollmentDate" Type="DateTime" />
     <p:CustomElement>
       Custom metadata.
     </p:CustomElement>
   </EntityType>
 </Schema>
```
 

Следующий код извлекает метаданные из элемента annotation и выводит их на консоль.

``` csharp
 EdmItemCollection collection = new EdmItemCollection("School.csdl");
 MetadataWorkspace workspace = new MetadataWorkspace();
 workspace.RegisterItemCollection(collection);
 EdmType contentType;
 workspace.TryGetType("Person", "SchoolModel", DataSpace.CSpace, out contentType);
 if (contentType.MetadataProperties.Contains("http://CustomNamespace.com:CustomElement"))
 {
     MetadataProperty annotationProperty =
         contentType.MetadataProperties["http://CustomNamespace.com:CustomElement"];
     object annotationValue = annotationProperty.Value;
     Console.WriteLine(annotationValue.ToString());
 }
```
 

Вышеприведенный код предполагает, что файл School.csdl находится в выходном каталоге проекта, а в проект добавлены инструкции `Imports` и `Using`.

``` csharp
 using System.Data.Metadata.Edm;
```
 

 

## <a name="conceptual-model-types-csdl"></a>Типы концептуальной модели (CSDL)

Язык определения концептуальной схемы (CSDL) поддерживает набор абстрактных примитивных типов данных, называется **EDMSimpleTypes**, которые определяют свойства в концептуальной модели. **EDMSimpleTypes** являются посредниками для примитивных типов данных, которые поддерживаются в среде хранения или размещения.

В приведенной ниже таблице представлены примитивные типы данных, поддерживаемые CSDL. В таблице также перечислены аспекты, которые могут применяться к каждому **EDMSimpleType**.

| EDMSimpleType                    | Описание                                                | Применимые аспекты                                                        |
|:---------------------------------|:-----------------------------------------------------------|:-------------------------------------------------------------------------|
| **Edm.Binary**                   | Содержит двоичные данные.                                      | MaxLength, FixedLength, Nullable, Default                                |
| **Edm.Boolean**                  | Содержит значение **true** или **false**.                  | Nullable, Default                                                        |
| **Edm.Byte**                     | Содержит 8-битное целое значение без знака.                  | Precision, Nullable, Default                                             |
| **Edm.DateTime**                 | Представляет дату и время.                                | Precision, Nullable, Default                                             |
| **Edm.DateTimeOffset**           | Возвращает дату и время в виде смещения в минутах от времени GMT. | Precision, Nullable, Default                                             |
| **Edm.Decimal**                  | Содержит точное числовое значение с заданной точностью и масштабом.   | Precision, Nullable, Default                                             |
| **Edm.Double**                   | Содержит число с плавающей запятой с точностью до 15 цифр   | Precision, Nullable, Default                                             |
| **Edm.Float**                    | Содержит число с плавающей запятой с точностью до 7 знаков.   | Precision, Nullable, Default                                             |
| **Edm.Guid**                     | Содержит уникальный 16-битный идентификатор.                      | Precision, Nullable, Default                                             |
| **Edm.Int16**                    | Содержит 16-разрядное целое значение со знаком.                    | Precision, Nullable, Default                                             |
| **Edm.Int32**                    | Содержит 32-разрядное целое значение со знаком.                    | Precision, Nullable, Default                                             |
| **Edm.Int64**                    | Содержит 64-разрядное целое значение со знаком.                    | Precision, Nullable, Default                                             |
| **Edm.SByte**                    | Содержит 8-разрядное целое значение со знаком.                     | Precision, Nullable, Default                                             |
| **Edm.String**                   | Содержит символьные данные.                                   | Unicode, FixedLength, MaxLength, Collation, Precision, Nullable, Default |
| **Edm.Time**                     | Содержит время дня.                                    | Precision, Nullable, Default                                             |
| **Edm.Geography**                |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeographyPoint**           |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeographyLineString**      |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeographyPolygon**         |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeographyMultiPoint**      |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeographyMultiLineString** |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeographyMultiPolygon**    |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeographyCollection**      |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.Geometry**                 |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeometryPoint**            |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeometryLineString**       |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeometryPolygon**          |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeometryMultiPoint**       |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeometryMultiLineString**  |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeometryMultiPolygon**     |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |
| **Edm.GeometryCollection**       |                                                            | Допускающие значение NULL, по умолчанию, SRID                                                  |

## <a name="facets-csdl"></a>Области (CSDL)

Аспекты в языке CSDL представляют ограничения для свойств типов сущности и сложных типов. Аспекты выглядят как XML-атрибуты в следующих элементах CSDL:

-   Свойство.
-   TypeRef
-   Параметр

В следующей таблице описываются аспекты, поддерживаемые в CSDL. Все аспекты являются необязательными. Некоторые перечисленные ниже аспекты используются платформой Entity Framework, при создании базы данных из концептуальной модели.

> [!NOTE]
> Сведения о типах данных в концептуальной модели см. в разделе типов концептуальной модели (CSDL).

| Аспект               | Описание                                                                                                                                                                                                                                                   | Применение                                                                                                                                                                                                                                                                                                                                                                           | Используется для создания базы данных | Используется средой выполнения |
|:--------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------|:--------------------|
| **Параметры сортировки**       | Задает последовательность сортировки, которая будет использоваться при выполнении операций сравнения и упорядочивания для значений свойств.                                                                                                               | **Edm.String**                                                                                                                                                                                                                                                                                                                                                                       | Да                              | Нет                  |
| **ConcurrencyMode** | Указывает, что значение свойства должно использоваться в проверках оптимистического управления параллелизмом.                                                                                                                                                                    | Все **EDMSimpleType** свойства                                                                                                                                                                                                                                                                                                                                                     | Нет                               | Да                 |
| **Default**         | Задает значение по умолчанию для свойства в случае, если при создании экземпляра не было задано значение.                                                                                                                                                                       | Все **EDMSimpleType** свойства                                                                                                                                                                                                                                                                                                                                                     | Да                              | Да                 |
| **FixedLength**     | Указывает, может ли изменяться длина значения свойства.                                                                                                                                                                                                  | **Edm.Binary**, **Edm.String**                                                                                                                                                                                                                                                                                                                                                       | Да                              | Нет                  |
| **MaxLength**       | Указывает максимальную длину значения свойства.                                                                                                                                                                                                           | **Edm.Binary**, **Edm.String**                                                                                                                                                                                                                                                                                                                                                       | Да                              | Нет                  |
| **Допускающий значение NULL**        | Указывает, может ли свойство иметь **null** значение.                                                                                                                                                                                                     | Все **EDMSimpleType** свойства                                                                                                                                                                                                                                                                                                                                                     | Да                              | Да                 |
| **Точность**       | Для свойств типа **десятичное**, количество десятичных разрядов, может иметь значение свойства. Для свойств типа **время**, **DateTime**, и **DateTimeOffset**, указывает количество цифр дробной части секунд значения свойства. | **Edm.DateTime**, **Edm.DateTimeOffset**, **Edm.Decimal**, **Edm.Time**                                                                                                                                                                                                                                                                                                              | Да                              | Нет                  |
| **Масштаб**           | Задает число цифр справа от десятичной запятой в значении свойства.                                                                                                                                                                      | **Edm.Decimal**                                                                                                                                                                                                                                                                                                                                                                      | Да                              | Нет                  |
| **SRID**            | Указывает идентификатор системы пространственных ссылок системы. Дополнительные сведения см. в разделе [SRID](http://en.wikipedia.org/wiki/SRID) и [SRID (SQL Server)](https://msdn.microsoft.com/library/bb964707.aspx).                                                              | **Edm.Geography, Edm.GeographyPoint, Edm.GeographyLineString, Edm.GeographyPolygon, Edm.GeographyMultiPoint, Edm.GeographyMultiLineString, Edm.GeographyMultiPolygon, Edm.GeographyCollection, Edm.Geometry, Edm.GeometryPoint, Edm.GeometryLineString, Edm.GeometryPolygon, Edm.GeometryMultiPoint, Edm.GeometryMultiLineString, Edm.GeometryMultiPolygon, Edm.GeometryCollection** | Нет                               | Да                 |
| **Юникод**         | Указывает, будет ли значение свойства храниться в Юникоде.                                                                                                                                                                                                    | **Edm.String**                                                                                                                                                                                                                                                                                                                                                                       | Да                              | Да                 |

>[!NOTE]
> При создании базы данных из концептуальной модели, мастер создания базы данных будет распознавать значение **StoreGeneratedPattern** атрибут **свойство** элемент, если он находится в следующие пространство имен: http://schemas.microsoft.com/ado/2009/02/edm/annotation. Поддерживаемые значения для атрибута **удостоверений** и **вычисленные**. Значение **удостоверений** создаст столбец базы данных со значением идентификатора, который создается в базе данных. Значение **вычисленные** создаст столбец со значением, вычисляемым в базе данных.

### <a name="example"></a>Пример

В следующем примере показывается применение аспектов к свойствам типа сущности:

``` xml
 <EntityType Name="Product">
   <Key>
     <PropertyRef Name="ProductId" />
   </Key>
   <Property Type="Int32"
             Name="ProductId" Nullable="false"
             a:StoreGeneratedPattern="Identity"
    xmlns:a="http://schemas.microsoft.com/ado/2009/02/edm/annotation" />
   <Property Type="String"
             Name="ProductName"
             Nullable="false"
             MaxLength="50" />
   <Property Type="String"
             Name="Location"
             Nullable="true"
             MaxLength="25" />
 </EntityType>
```
