---
title: Связей - конструктор EF - EF6
author: divega
ms.date: 10/23/2016
ms.assetid: 402fe960-754b-470f-976b-e5de3e9986b5
ms.openlocfilehash: d429c39dafbf183caabdc85748c188deb8dd6f66
ms.sourcegitcommit: 2b787009fd5be5627f1189ee396e708cd130e07b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2018
ms.locfileid: "45490687"
---
# <a name="relationships---ef-designer"></a>Связей - конструктор EF
> [!NOTE]
> Эта страница содержит сведения о настройке связи в модели в конструкторе EF. Общие сведения о связях в EF и способах доступа к данных и управления ими с помощью связей см. в разделе [связей и свойств навигации](~/ef6/fundamentals/relationships.md).

Ассоциации определяют связи между типами сущностей в модели. В этом разделе показано, как сопоставить ассоциации с Entity Framework Designer (конструктор EF). На следующем рисунке показана основные окна, которые используются при работе с конструктором EF.

![Конструктор EF](~/ef6/media/efdesigner.png)

> [!NOTE]
> При создании концептуальной модели, предупреждения о несопоставленных сущностях и ассоциациях, появляются в списке ошибок. Эти предупреждения можно игнорировать, поскольку после нажатия кнопки для создания базы данных из модели, пропадут.

## <a name="associations-overview"></a>Общие сведения о связи

При разработке модели в конструкторе EF, EDMX-файл представляет модель. В файле EDMX **ассоциации** элемент определяет связь между двумя типами сущностей. Ассоциация должна указывать типы сущностей, которые участвуют в связи, и возможное количество типов сущностей на каждом конце связи, которое называется кратностью. Кратность элемента ассоциации может иметь значение (1), ноль или один (0.. 1) или многие (\*). Эта информация указывается в двух дочерних **окончания** элементов.

Во время выполнения экземпляров типа сущности на одном конце ассоциации может осуществляться через свойства навигации или внешних ключей (Если вы решили предоставляют внешние ключи в сущностях). Внешние ключи представлены, связи между сущностями, управляются с помощью **ReferentialConstraint** элемент (дочерний элемент элемента **ассоциации** элемент). Рекомендуется всегда предоставлять внешние ключи для связи в сущностях.

> [!NOTE]
> В многие ко многим (\*:\*) не удается добавить внешних ключей в сущности. В \*:\* связи, данные сопоставления управляется с помощью независимый объект.

Дополнительные сведения об элементах языка CSDL (**ReferentialConstraint**, **ассоциации**т. д.) см. в разделе [спецификация языка CSDL](~/ef6/modeling/designer/advanced/edmx/csdl-spec.md).

## <a name="create-and-delete-associations"></a>Создание и удаление ассоциации

Создание ассоциации с обновлениями конструктор EF содержимое модели в EDMX-файле. После создания ассоциации необходимо создать сопоставления для ассоциации (обсуждается далее в этом разделе).

> [!NOTE]
> В этом разделе предполагается, что вы уже добавили сущностей, которые вы хотите создать ассоциацию между для вашей модели.

### <a name="to-create-an-association"></a>Создание ассоциации

1.  Щелкните правой кнопкой мыши пустой участок области конструктора, выберите пункт **Add New**и выберите **связи...** .
2.  Задайте параметры для ассоциации в **добавить сопоставление** диалоговое окно.

    ![Добавление сопоставления](~/ef6/media/addassociation.png)

    > [!NOTE]
    > Вы можете не добавлять свойства навигации или свойства внешнего ключа для сущностей в элементах ассоциации, сбросив ** свойство навигации ** и ** добавить свойства внешнего ключа для &lt;имя типа сущности&gt; сущности ** флажки. При добавлении одного свойства навигации ассоциацию можно будет перемещать только в одном направлении. При добавлении свойств навигации необходимо добавить свойства внешнего ключа, чтобы обеспечить доступ к сущностям в элементах ассоциации.
    
3.  Нажмите кнопку **ОК**.

### <a name="to-delete-an-association"></a>Удаление ассоциации

Чтобы удалить связь выполните одно из следующих:

-   Щелкните правой кнопкой мыши связь в конструкторе EF и выберите пункт **удалить**.

- OR-

-   Выберите одну или несколько ассоциаций и нажмите клавишу DELETE.

## <a name="include-foreign-key-properties-in-your-entities-referential-constraints"></a>Включить свойства внешнего ключа в сущности (ссылочные ограничения)

Рекомендуется всегда предоставлять внешние ключи для связи в сущностях. Entity Framework использует ссылочное ограничение, чтобы определить, что свойство действует как внешний ключ для связи.

Если вы установили флажок ***добавить свойства внешнего ключа для &lt;имя типа сущности&gt; сущности*** флажок был добавлен при создании связи этого справочного ограничения для вас.

При использовании для добавления или изменения справочных ограничений конструкторе EF, EF добавляет или изменяет **ReferentialConstraint** элемент в содержимом CSDL EDMX-файла.

-   Дважды щелкните ассоциацию, которую необходимо изменить.
    **Справочного ограничения** откроется диалоговое окно.
-   Из **участника** выберите в раскрывающемся списке, выберите основную сущность в ссылочном ограничении.
    Свойства ключа сущности добавляются к **ключ субъекта-службы** списка в диалоговом окне.
-   Из **зависимых** выберите в раскрывающемся списке, выберите зависимую сущность в ссылочном ограничении.
-   Для каждого основного ключа, который имеет зависимый ключ, выберите соответствующий зависимый ключ из раскрывающихся списков в **зависящий от него ключ** столбца.

    ![Ограничение ссылки](~/ef6/media/refconstraint.png)

-   Нажмите кнопку **ОК**.

## <a name="create-and-edit-association-mappings"></a>создавать и изменять сопоставления ассоциаций

Можно указать сопоставление ассоциации в базу данных в **сведения о сопоставлении** окно конструктора Entity FRAMEWORK.

> [!NOTE]
> Можно сопоставить только сведения для связей, которые не имеют ссылочные ограничения, указанные. Если указан справочного ограничения свойство внешнего ключа входит в сущности, и можно использовать сведения о сопоставлении сущности, к элементу управления, какой столбец сопоставляется внешний ключ.

### <a name="create-an-association-mapping"></a>Создание сопоставления ассоциаций

-   Щелкните правой кнопкой мыши ассоциацию в области конструктора и выберите **сопоставление таблицы**.
    Это появится сопоставление ассоциации в **сведения о сопоставлении** окна.
-   Нажмите кнопку **добавить таблицу или представление**.
    Появится раскрывающийся список, содержащий все таблицы в модели хранения.
-   Выберите таблицу, с которой будет сопоставлена ассоциация.
    **Сведения о сопоставлении** окне отображаются оба элемента ассоциации и свойства ключа для типа сущности на каждом **окончания**.
-   Для каждого свойства ключа щелкните **столбец** поле и выберите столбец, к которому будет сопоставлено это свойство.

    ![Сведения о сопоставлении 4](~/ef6/media/mappingdetails4.png)

### <a name="edit-an-association-mapping"></a>Изменение сопоставления ассоциаций

-   Щелкните правой кнопкой мыши ассоциацию в области конструктора и выберите **сопоставление таблицы**.
    Это появится сопоставление ассоциации в **сведения о сопоставлении** окна.
-   Нажмите кнопку **сопоставляется &lt;имя таблицы&gt;**.
    Появится раскрывающийся список, содержащий все таблицы в модели хранения.
-   Выберите таблицу, с которой будет сопоставлена ассоциация.
    **Сведения о сопоставлении** окне отображаются оба элемента ассоциации и свойства ключа для типа сущности на концах.
-   Для каждого свойства ключа щелкните **столбец** поле и выберите столбец, к которому будет сопоставлено это свойство.

## <a name="edit-and-delete-navigation-properties"></a>Изменение и удаление свойства навигации

Свойства навигации — это свойства быстрого доступа, используемые для нахождения сущностей в элементах ассоциации в модели. Свойства навигации могут быть созданы при создании ассоциации между двумя типами сущностей.

#### <a name="to-edit-navigation-properties"></a>Чтобы изменить свойства навигации

-   Выберите свойство навигации на поверхности конструктора EF.
    Сведения о свойстве навигации отображаются в Visual Studio **свойства** окна.
-   Измените параметры свойств в **свойства** окна.

#### <a name="to-delete-navigation-properties"></a>Удалить свойства навигации

-   Если внешние ключи не представлены в типах сущностей в концептуальной модели, то удаление свойства навигации может обеспечить перемещение соответствующей ассоциации только в одном направлении или сделать ее неперемещаемой.
-   Щелкните правой кнопкой мыши свойство навигации в конструкторе EF и выберите пункт **удалить**.
