---
title: Созданные значения — EF Core
author: rowanmiller
ms.date: 10/27/2016
ms.assetid: eb082011-11a1-41b4-a108-15daafa03e80
uid: core/modeling/generated-properties
ms.openlocfilehash: 9ecfa924a0614f327f0bd202cb7dda95bea810af
ms.sourcegitcommit: 0d36e8ff0892b7f034b765b15e041f375f88579a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2018
ms.locfileid: "44250703"
---
# <a name="generated-values"></a>Созданные значения

## <a name="value-generation-patterns"></a>Шаблоны для создания значения

Существует три шаблона создания значения, которые могут использоваться для свойства.
* Без создания значение
* Добавить значение, созданное в
* Значение, созданное на добавление или обновление

### <a name="no-value-generation"></a>Без создания значение

Без создания значение означает, что всегда будет указано допустимое значение сохраняется в базе данных. Это допустимое значение должны быть назначены новые сущности, прежде чем они добавляются в контекст.

### <a name="value-generated-on-add"></a>Добавить значение, созданное в

Значение, созданное на добавление означает, что значение, создаваемое для новых сущностей.

В зависимости от используемого поставщика баз данных, значения может быть создан на стороне клиента с EF или в базе данных. Если значение создается в базе данных, EF может назначить это временное значение при добавлении сущности в контекст. Это временное значение затем заменено значение сформированный базой данных во время `SaveChanges()`.

При добавлении сущности в контекст, имеет значение, присваиваемое свойству, EF попытается вставить это значение вместо создания нового. Свойство видимости, имеет значение, если не назначено значение по умолчанию среды CLR (`null` для `string`, `0` для `int`, `Guid.Empty` для `Guid`и т. д.). Дополнительные сведения см. в разделе [явные значения для создаваемых свойств](../saving/explicit-values-generated-properties.md).

> [!WARNING]  
> Способ создания значения для добавленных сущностей будет зависеть от используемого поставщика базы данных. Поставщики баз данных может автоматически настроить создание значений для некоторых типов свойств, но другие могут потребовать ручной настройки, как создается значение.
>
> Например, при использовании SQL Server, значения будут создаваться автоматически для `GUID` свойства (с помощью GUID алгоритм последовательной обработки SQL Server). Тем не менее если указать, что `DateTime` создается свойство при добавлении, то необходимо настроить способ создать значения. — Это один из способов сделать это, чтобы настроить значение по умолчанию `GETDATE()`, см. в разделе [значения по умолчанию](relational/default-values.md).

### <a name="value-generated-on-add-or-update"></a>Значение, созданное на добавление или обновление

Значение, созданное на добавление или обновление означает, что новое значение формируется каждый раз при сохранении записи (insert или update).

Как и `value generated on add`, если указать значение для свойства на вновь добавленный экземпляр сущности, что значение будет вставлен вместо того чтобы создаваемый значение. Это также можно задать явно заданное значение при обновлении. Дополнительные сведения см. в разделе [явные значения для создаваемых свойств](../saving/explicit-values-generated-properties.md).

> [!WARNING]
> Способ создания значения для добавленных и измененных сущностей будет зависеть от используемого поставщика базы данных. Поставщики баз данных может автоматически настраивает Создание значений для некоторых типов свойств, а другие будут требуют ручной настройки, как создается значение.
> 
> Например, при использовании SQL Server `byte[]` свойства, заданные при создании на добавление или обновление и помечен как маркеры параллелизма, будет настроена с `rowversion` тип данных — так, что значения будут создаваться в базе данных. Тем не менее если указать, что `DateTime` создается свойство добавить или обновить, а затем необходимо настроить способ создать значения. — Это один из способов сделать это, чтобы настроить значение по умолчанию `GETDATE()` (см. в разделе [значения по умолчанию](relational/default-values.md)) для формирования значений для новых строк. Затем можно использовать триггер базы данных для формирования значений во время обновления (например, следующий триггер пример).
> 
> [!code-sql[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAddOrUpdate.sql)]

## <a name="conventions"></a>Соглашения

По соглашению не являющиеся составными первичных ключей типа short, int, long или Guid будет настроена для значения, создаваемые на добавление. Все остальные свойства будет настроена с без создания значение.

## <a name="data-annotations"></a>Заметки к данным

### <a name="no-value-generation-data-annotations"></a>Без создания значение (заметки к данным)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-data-annotations"></a>Значение, созданное на добавление (заметки к данным)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> Это просто позволяет платформе EF, что значения, сформированные для добавленных сущностей, он не гарантирует, что EF действия по настройке реальные механизмы для создания значений. См. в разделе [добавить значение, созданное в](#value-generated-on-add) более подробные сведения.

### <a name="value-generated-on-add-or-update-data-annotations"></a>Значение, созданное на добавление или обновление (заметки к данным)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> Это просто позволяет платформе EF, что значения, сформированные для добавленных или обновленных сущностей, он не гарантирует, что EF действия по настройке реальные механизмы для создания значений. См. в разделе [значение, созданное в добавлении или обновлении](#value-generated-on-add-or-update) более подробные сведения.

## <a name="fluent-api"></a>Текучий API

Fluent API можно использовать для изменения шаблона создания значение для заданного свойства.

### <a name="no-value-generation-fluent-api"></a>Без создания значение (Fluent API)

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-fluent-api"></a>Значение, созданное на добавление (Fluent API)

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> `ValueGeneratedOnAdd()` дает платформе EF, что значения, сформированные для добавленных сущностей, он не гарантирует, что EF действия по настройке реальные механизмы для создания значений.  См. в разделе [добавить значение, созданное в](#value-generated-on-add) более подробные сведения.

### <a name="value-generated-on-add-or-update-fluent-api"></a>Значение, созданное на добавление или обновление (Fluent API)

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> Это просто позволяет платформе EF, что значения, сформированные для добавленных или обновленных сущностей, он не гарантирует, что EF действия по настройке реальные механизмы для создания значений. См. в разделе [значение, созданное в добавлении или обновлении](#value-generated-on-add-or-update) более подробные сведения.
