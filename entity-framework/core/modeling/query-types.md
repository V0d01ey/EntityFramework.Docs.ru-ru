---
title: "Типы запросов - EF Core"
author: anpete
ms.author: anpete
ms.date: 2/26/2018
ms.assetid: 9F4450C5-1A3F-4BB6-AC19-9FAC64292AAD
ms.technology: entity-framework-core
uid: core/modeling/query-types
ms.openlocfilehash: dfd08cd1c30debddc79740bbf05c39c22e973855
ms.sourcegitcommit: 01b5cf3b7c983bcced91e7cc4c78391ced2d2caa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/17/2018
---
# <a name="query-types"></a>Типы запросов
> [!NOTE]
> Этот компонент является новые возможности EF Core 2.1

Типы запросов являются типы результатов запросов только для чтения, которые могут добавляться EF базовой модели. Типы запросов включить нерегламентированный запрос (например, анонимные типы), но являются более гибкими, из-за наличия сопоставление параметров.

Они похожи на типы сущностей в том, что:

- Они являются типами POCO C#, которые добавляются в модель, либо в ```OnModelCreating``` с помощью ```ModelBuilder.Query``` метод, или через свойство DbContext «набор» (для запроса типов такого свойства типизируется как ```DbQuery<T>``` вместо ```DbSet<T>```).
- Они поддерживают большую часть возможностей же сопоставления как типы обычной сущности. Например, сопоставление наследования, переходы, (см. ниже limitiations) и в реляционных хранилищах, возможность настройки объекты схемы целевой базы данных через ```ToTable```, ```HasColumn``` методов fluent api (или заметок к данным).

Типы запросов отличаются от сущности типов в том, что:

- Ключ определен не требуется.
- Никогда не находятся под контролем отслеживания изменений.
- Никогда не обнаруживаются по соглашению.
- Только поддерживают подмножество возможности навигации сопоставление — в частности, никогда не может выступать в роли основной элемент связи.
- Может быть сопоставлен _определение запроса_ -определение это дополнительный запрос, используемый источником данных для типа запроса.

Ниже приведены некоторые из сценариев использования основных типов запросов.

- Сопоставление для представления базы данных.
- Сопоставление таблиц, у которых нет первичного ключа.
- Для нерегламентированных выступают в качестве возвращаемого типа для ```FromSql()``` запросов.
- Сопоставление запросов, определенных в модели.

> [!TIP]
> Сопоставление типа запроса представления базы данных достигается с помощью ```ToTable``` fluent API.

## <a name="example"></a>Пример

В следующем примере показано, как используется тип запроса для запроса представления базы данных.

> [!TIP]
> Для этой статьи вы можете скачать [пример](https://github.com/aspnet/EntityFrameworkCore/tree/dev/samples/QueryTypes) из репозитория GitHub.

Во-первых определим простой модели блога и Post.

[!code-csharp[Main](../../../efcore-dev/samples/QueryTypes/Program.cs#Entities)]

Затем определяется представление простой базы данных, мы будем запрашивать количество записей, связанных с каждого блога:

[!code-csharp[Main](../../../efcore-dev/samples/QueryTypes/Program.cs#View)]

Затем определяется класс, содержащий результат из представления базы данных:

[!code-csharp[Main](../../../efcore-dev/samples/QueryTypes/Program.cs#QueryType)]

Далее мы настраиваем тип запроса в _OnModelCreating_ с помощью ```modelBuilder.Query<T>``` API.
Мы используем стандартной конфигурации fluent API-интерфейсы для настройки сопоставления для типа запроса:

[!code-csharp[Main](../../../efcore-dev/samples/QueryTypes/Program.cs#Configuration)]

Наконец можно запросить представления базы данных обычным образом:

[!code-csharp[Main](../../../efcore-dev/samples/QueryTypes/Program.cs#Query)]

> [!TIP]
> Обратите внимание, что мы определили свойство контекста запроса уровня (DbQuery) в качестве корневой для запросов этого типа.
