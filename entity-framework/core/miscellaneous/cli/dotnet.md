---
title: .NET core CLI - EF Core
author: bricelam
ms.author: bricelam
ms.date: 11/6/2017
ms.technology: entity-framework-core
ms.openlocfilehash: d053d53bd50d2e7d16223c5b4e4009c9bb2298bb
ms.sourcegitcommit: 038acd91ce2f5a28d76dcd2eab72eeba225e366d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/14/2018
---
<a name="ef-core-net-command-line-tools"></a>Средства командной строки .NET Core EF
===============================
Средства командной строки .NET Entity Framework Core являются расширением кросс платформенных **dotnet** команду, которая входит в состав из [пакета SDK для .NET Core][2].

> [!TIP]
> Если вы используете Visual Studio, мы рекомендуем [средства PMC] [ 1] , поскольку они предоставляют более интеграция.

<a name="installing-the-tools"></a>Установка инструментов
--------------------
> [!NOTE]
> .NET Core SDK версии 2.1.300 и включает новую **dotnet ef** команды, которые совместимы с EF Core 2.0 и более поздних версиях. Таким образом, при использовании последние версии пакета SDK .NET Core и выполнения EF Core установки не требуется и можно пропустить оставшейся части этого раздела.
>
> С другой стороны **dotnet ef** средство автономной версии пакета SDK для .NET Core 2.1.300 и более поздних не совместим с EF основных версий 1.0 и 1.1. Прежде чем можно работать с проекта, использующего более ранних версиях EF ядра на компьютере с .NET Core SDK 2.1.300 или более новая версия, также необходимо установить версию 2.1.200 или более ранней версии пакета SDK и настроить приложение на использование этого старую версию, изменив его  [global.json](https://docs.microsoft.com/en-us/dotnet/core/tools/global-json) файла. Этот файл обычно включаются в нужном каталоге решений (один выше проекта). Затем можно перейти с инструкцией installlation ниже.

Для предыдущих версий пакета SDK для .NET Core можно установить программы командной строки .NET Core EF, выполнив следующие действия:

1. Измените файл проекта и добавьте Microsoft.EntityFrameworkCore.Tools.DotNet как элемент DotNetCliToolReference (см. ниже)
2. Выполните следующие команды:

       dotnet add package Microsoft.EntityFrameworkCore.Design
       dotnet restore

Итоговый проект должен выглядеть примерно следующим образом:

``` xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>netcoreapp2.0</TargetFramework>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore.Design"
                      Version="2.0.0"
                      PrivateAssets="All" />
  </ItemGroup>
  <ItemGroup>
    <DotNetCliToolReference Include="Microsoft.EntityFrameworkCore.Tools.DotNet"
                            Version="2.0.0" />
  </ItemGroup>
</Project>
```

> [!NOTE]
> Ссылку на пакет с `PrivateAssets="All"` означает он не предоставлен в проекты, которые ссылаются на этот проект, что особенно полезно для пакетов, которые обычно используются только во время разработки.

Если вы все выполнили правильно, необходимо успешно выполните следующую команду в командной строке.

``` Console
dotnet ef
```

<a name="using-the-tools"></a>С помощью средств
---------------
При каждом вызове команды состоит из двух проектов:

Целевой проект служит для добавления всех файлов (в некоторых случаях они удаляются из него). Целевой проект по умолчанию в проект в текущем каталоге, но можно изменить с помощью <nobr> **--проекта** </nobr> параметр.

Запускаемый проект эмулируется инструментами при выполнении кода проекта. Он также значения по умолчанию в проект в текущем каталоге, но можно изменить с помощью **--запускаемый проект** параметр.

> [!NOTE]
> Например, обновление базы данных в веб-приложения, который имеет ядро EF установлен в другом проекте будет выглядеть следующим образом: `dotnet ef database update --project {project-path}` (из каталога веб-приложения)

Общие параметры:

|    |                                  |                             |
|:---|:---------------------------------|:----------------------------|
|    | --json                           | Отображение выходных данных JSON.           |
| -c | --контекста \<DBCONTEXT >           | Чтобы использовать класс DbContext.       |
| -p | --проекта \<проекта >             | Проект для использования.         |
| -s | --запускаемый проект \<проекта >     | Запускаемый проект для использования. |
|    | --framework \<FRAMEWORK >         | Требуемая версия .NET framework.       |
|    | --Конфигурация \<конфигурации > | Используемая конфигурация.   |
|    | Среда выполнения — \<идентификатор >          | Использовать в среде выполнения.         |
| -h | --Справка                           | Отобразить справку.      |
| -v | -verbose                        | Показать подробные выходные данные.        |
|    | --Нет цвета                       | Не выделения цветом выходных данных.      |
|    | — префикс вывода                  | Префикс выходных данных с уровнем.   |


> [!TIP]
> Чтобы указать среды ASP.NET Core, задайте **ASPNETCORE_ENVIRONMENT** переменной среды перед запуском.

<a name="commands"></a>Команды
--------

### <a name="dotnet-ef-database-drop"></a>Удаление базы данных ef DotNet

Удаляет базу данных.

Параметры:

|    |           |                                                          |
|:---|:----------|:---------------------------------------------------------|
| -f | --force   | Не подтверждено.                                           |
|    | — выполнение | Показать базу данных, которая будет удалена, но не удалять его. |

### <a name="dotnet-ef-database-update"></a>Обновление базы данных ef DotNet

Обновляет базу данных для указанного миграции.

Аргументы:

|              |                                                                                              |
|:-------------|:---------------------------------------------------------------------------------------------|
| \<МИГРАЦИЯ &GT; | Целевая миграция. Если значение равно 0, всех операций переноса будут отменены. По умолчанию последней миграции. |

### <a name="dotnet-ef-dbcontext-info"></a>сведения о dbcontext ef DotNet

Возвращает сведения о типе DbContext.

### <a name="dotnet-ef-dbcontext-list"></a>Список dbcontext ef DotNet

Список доступных типов DbContext.

### <a name="dotnet-ef-dbcontext-scaffold"></a>ef DotNet dbcontext-формирования шаблонов

Закрепление типы DbContext и сущности, для базы данных.

Аргументы:

|               |                                                                     |
|:--------------|:--------------------------------------------------------------------|
| \<ПОДКЛЮЧЕНИЯ &GT; | Строка подключения к базе данных.                              |
| \<ПОСТАВЩИК &GT;   | Поставщик для использования. (Например: Microsoft.EntityFrameworkCore.SqlServer) |

Параметры:

|                 |                                         |                                                                                                  |
|:----------------|:----------------------------------------|:-------------------------------------------------------------------------------------------------|
| <nobr>-d</nobr> | --заметок к данным                      | Атрибуты можно используйте для настройки модели (где это возможно). Если этот параметр опущен, используется только fluent API. |
| -c              | --контекста \<имя >                       | Имя DbContext.                                                                       |
|                 | --контекста dir \<путь >                   | Помещение DbContext файла в каталог. Пути задаются относительно каталога проекта.             |
| -f              | --force                                 | Перезаписывайте существующие файлы.                                                                        |
| -o              | --выходной каталог \<путь >                    | Чтобы поместить файлы в каталог. Пути задаются относительно каталога проекта.                      |
|                 | <nobr>--схемы \<SCHEMA_NAME >...</nobr> | Схемы таблиц для создания типов сущностей для.                                              |
| -t              | --таблицы \<имя_таблицы >...                | Таблицы для создания типов сущностей для.                                                         |
|                 | --Используйте имена баз данных                    | Используйте имена таблиц и столбцов непосредственно из базы данных.                                           |

### <a name="dotnet-ef-migrations-add"></a>добавить DotNet ef миграции

Добавляет новую миграцию.

Аргументы:

|         |                            |
|:--------|:---------------------------|
| \<ИМЯ &GT; | Имя миграции. |

Параметры:

|                 |                                   |                                                                                                                  |
|:----------------|:----------------------------------|:-----------------------------------------------------------------------------------------------------------------|
| <nobr>-o</nobr> | <nobr>--выходной каталог \<путь ></nobr> | Каталог (и пространства имен sub) для использования. Пути задаются относительно каталога проекта. Значение по умолчанию «Миграция». |

### <a name="dotnet-ef-migrations-list"></a>Список миграции ef DotNet

Список доступных миграции.

### <a name="dotnet-ef-migrations-remove"></a>Удалите DotNet ef миграции

Удаляет последний переноса.

Параметры:

|    |         |                                                                       |
|:---|:--------|:----------------------------------------------------------------------|
| -f | --force | Вернуть миграции, если он был применен к базе данных. |

### <a name="dotnet-ef-migrations-script"></a>сценарий миграции ef DotNet

Формирует скрипт SQL из миграции.

Аргументы:

|         |                                                               |
|:--------|:--------------------------------------------------------------|
| \<ИЗ &GT; | Начальный миграции. По умолчанию равно 0 (начальной базы данных). |
| \<ЧТОБЫ &GT;   | Окончания миграции. По умолчанию последней миграции.         |

Параметры:

|    |                  |                                                                    |
|:---|:-----------------|:-------------------------------------------------------------------|
| -o | --Вывод \<файла > | Файл для записи результата.                                   |
| -i | --идемпотентными     | Создание скрипта, который можно использовать для базы данных на любой миграции. |


  [1]: powershell.md
  [2]: https://www.microsoft.com/net/core
