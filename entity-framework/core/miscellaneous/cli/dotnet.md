---
title: .NET core CLI — EF Core
author: bricelam
ms.author: bricelam
ms.date: 11/6/2017
uid: core/miscellaneous/cli/dotnet
ms.openlocfilehash: 81427b010f63bdd591ffb9117c1556722313c3fa
ms.sourcegitcommit: dadee5905ada9ecdbae28363a682950383ce3e10
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/27/2018
ms.locfileid: "42995301"
---
<a name="ef-core-net-command-line-tools"></a>Средства командной строки .NET Core EF
===============================
Инструменты командной строки .NET Entity Framework Core представляют собой расширение для кроссплатформенного **dotnet** команду, которая входит в состав из [пакет SDK для .NET Core][2].

> [!TIP]
> Если вы используете Visual Studio, мы рекомендуем [инструменты PMC] [ 1] , так как они предоставляют более интегрированное взаимодействие.

<a name="installing-the-tools"></a>Установка инструментов
--------------------
> [!NOTE]
> На пакет SDK для .NET Core версии 2.1.300 и включает в себя более новые **dotnet ef** команд, которые совместимы с EF Core 2.0 и более поздних версий. Таким образом, если вы используете последние версии пакета SDK для .NET Core и среды выполнения EF Core, никакой установки не требуется и оставшейся части этого раздела можно проигнорировать.
>
> С другой стороны **dotnet ef** средство автономной версии пакета SDK для .NET Core 2.1.300 и более поздних версий не совместим с версией EF Core 1.0 и 1.1. Прежде чем можно работать с проектом, который использует эти более ранних версиях EF Core на компьютере с .NET Core SDK 2.1.300 или более поздняя версия, необходимо также установить версию 2.1.200 или более ранней версии пакета SDK и настроить приложение, чтобы использовать версию, изменив его  [global.json](https://docs.microsoft.com/en-us/dotnet/core/tools/global-json) файла. Этот файл обычно включаются в каталоге решения (по одному выше проекта). Затем можно перейти с инструкцией installlation ниже.

Для предыдущих версий пакета SDK для .NET Core можно установить средства командной строки .NET Core EF, выполнив следующие действия:

1. Измените файл проекта и добавьте Microsoft.EntityFrameworkCore.Tools.DotNet как элемент DotNetCliToolReference (см. ниже)
2. Выполните следующие команды:

       dotnet add package Microsoft.EntityFrameworkCore.Design
       dotnet restore

Итоговый проект должен выглядеть следующим образом:

``` xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>netcoreapp2.0</TargetFramework>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore.Design"
                      Version="2.0.0"
                      PrivateAssets="All" />
  </ItemGroup>
  <ItemGroup>
    <DotNetCliToolReference Include="Microsoft.EntityFrameworkCore.Tools.DotNet"
                            Version="2.0.0" />
  </ItemGroup>
</Project>
```

> [!NOTE]
> Ссылку на пакет с `PrivateAssets="All"` означает, что он не доступен для проектов, которые ссылаются на этот проект, что особенно полезно для пакетов, которые обычно используются только во время разработки.

Если все делается вправо, вы сможете успешно, выполните следующую команду в командной строке.

``` Console
dotnet ef
```

<a name="using-the-tools"></a>С помощью средств
---------------
При каждом вызове команды состоит из двух проектов:

Целевой проект служит для добавления всех файлов (в некоторых случаях они удаляются из него). Проект по умолчанию проект в текущем каталоге, но можно изменить с помощью <nobr> **--проекта** </nobr> параметр.

Запускаемый проект эмулируется инструментами при выполнении кода проекта. Он также по умолчанию в проект в текущем каталоге, но можно изменить с помощью **--запускаемым проектом** параметр.

> [!NOTE]
> Например, обновление базы данных веб-приложения с EF Core установлен в виде отдельного проекта будет выглядеть следующим образом: `dotnet ef database update --project {project-path}` (из каталога веб-приложения)

Общие параметры:

|    |                                  |                             |
|:---|:---------------------------------|:----------------------------|
|    | --json                           | Показать выходные данные JSON.           |
| -c | --контекста \<DBCONTEXT >           | DbContext для использования.       |
| -p | --проекта \<проекта >             | Проект для использования.         |
| -s | --запускаемым проектом \<проекта >     | Запускаемый проект для использования. |
|    | --framework \<FRAMEWORK >         | Целевая платформа.       |
|    | --Конфигурация \<CONFIGURATION > | Используемая конфигурация.   |
|    | Среда выполнения-- \<идентификатор >          | Среда выполнения для использования.         |
| -h | --справки                           | Показать справочные сведения.      |
| -v | --verbose                        | Показать подробные выходные данные.        |
|    | --Нет цвета                       | Не необходимо выделить цветом выходные данные.      |
|    | — префикс output                  | Префикс выходных данных с уровнем.   |


> [!TIP]
> Среда ASP.NET Core, установите **ASPNETCORE_ENVIRONMENT** переменной среды перед запуском.

<a name="commands"></a>Команды
--------

### <a name="dotnet-ef-database-drop"></a>Удаление базы данных ef DotNet

Удаляет базу данных.

Параметры:

|    |           |                                                          |
|:---|:----------|:---------------------------------------------------------|
| -f | --force   | Не подтверждено.                                           |
|    | --dry-run | Показать базу данных, которая будет удалена, но не удаляйте ее. |

### <a name="dotnet-ef-database-update"></a>Обновление базы данных ef DotNet

Обновляет базу данных для указанного миграции.

Аргументы:

|              |                                                                                              |
|:-------------|:---------------------------------------------------------------------------------------------|
| \<МИГРАЦИЯ &GT; | Целевой объект миграции. Если значение равно 0, будут отменены все миграции. По умолчанию к последней миграции. |

### <a name="dotnet-ef-dbcontext-info"></a>сведения о dbcontext ef DotNet

Возвращает сведения о типе DbContext.

### <a name="dotnet-ef-dbcontext-list"></a>DotNet ef dbcontext списка

Список доступных типов DbContext.

### <a name="dotnet-ef-dbcontext-scaffold"></a>DotNet ef dbcontext каркаса

Формирует шаблоны DbContext и типов сущностей для базы данных.

Аргументы:

|               |                                                                             |
|:--------------|:----------------------------------------------------------------------------|
| \<ПОДКЛЮЧЕНИЯ &GT; | Строка подключения к базе данных.                                      |
| \<ПОСТАВЩИК &GT;   | Используемый поставщик. (например, Microsoft.EntityFrameworkCore.SqlServer) |

Параметры:

|                 |                                         |                                                                                                  |
|:----------------|:----------------------------------------|:-------------------------------------------------------------------------------------------------|
| <nobr>-d</nobr> | --заметок к данным                      | Атрибуты можно используйте для настройки модели (где это возможно). Если этот параметр опущен, используется только текучего API. |
| -c              | --контекста \<имя >                       | Имя DbContext.                                                                       |
|                 | --контекста dir \<путь >                   | Поместите файл DbContext в каталог. Пути задаются относительно каталога проекта.             |
| -f              | --force                                 | Перезаписывайте существующие файлы.                                                                        |
| -o              | --выходные данные dir \<путь >                    | Чтобы поместить файлы каталог. Пути задаются относительно каталога проекта.                      |
|                 | <nobr>--схемы \<SCHEMA_NAME >...</nobr> | Схемы таблиц для создания типов сущности для.                                              |
| -t              | --таблицы \<имя_таблицы >...                | Для создания типов сущности для таблиц.                                                         |
|                 | --Используйте имена баз данных                    | Используйте имена таблиц и столбцов непосредственно из базы данных.                                           |

### <a name="dotnet-ef-migrations-add"></a>Добавление DotNet ef migrations

Добавление новой миграции.

Аргументы:

|         |                            |
|:--------|:---------------------------|
| \<ИМЯ &GT; | Имя миграции. |

Параметры:

|                 |                                   |                                                                                                                  |
|:----------------|:----------------------------------|:-----------------------------------------------------------------------------------------------------------------|
| <nobr>-o</nobr> | <nobr>--выходные данные dir \<путь ></nobr> | Каталог (и sub-namespace) для использования. Пути задаются относительно каталога проекта. По умолчанию используется «Миграция». |

### <a name="dotnet-ef-migrations-list"></a>DotNet ef migrations списка

Список доступных миграций.

### <a name="dotnet-ef-migrations-remove"></a>удалить DotNet ef migrations

Удаление последней миграции.

Параметры:

|    |         |                                                                       |
|:---|:--------|:----------------------------------------------------------------------|
| -f | --force | Отменить миграцию, если она была применена к базе данных. |

### <a name="dotnet-ef-migrations-script"></a>DotNet ef migrations сценария

Формирует скрипт SQL из миграции.

Аргументы:

|         |                                                               |
|:--------|:--------------------------------------------------------------|
| \<ИЗ &GT; | Начала миграции. По умолчанию равно 0 (исходной базы данных). |
| \<ЧТОБЫ &GT;   | Окончания миграции. По умолчанию к последней миграции.         |

Параметры:

|    |                  |                                                                    |
|:---|:-----------------|:-------------------------------------------------------------------|
| -o | --выходные данные \<файла > | Файл для записи результата.                                   |
| -i | --идемпотентными     | Создайте скрипт, который может использоваться в любой базе данных с любой миграции. |


  [1]: powershell.md
  [2]: https://www.microsoft.com/net/core
